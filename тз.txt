# ะขะตัะฝะธัะตัะบะพะต ะทะฐะดะฐะฝะธะต: ะัะธะฟัะพ-ะฑะพั ะดะปั ะพััะปะตะถะธะฒะฐะฝะธั ะธะฝะดะธะบะฐัะพัะพะฒ

## 1. ะะฑัะตะต ะพะฟะธัะฐะฝะธะต ะฟัะพะตะบัะฐ

Telegram-ะฑะพั ะดะปั ะพััะปะตะถะธะฒะฐะฝะธั ัะตัะฝะธัะตัะบะธั ะธะฝะดะธะบะฐัะพัะพะฒ ะบัะธะฟัะพะฒะฐะปัั ั ัะฒะตะดะพะผะปะตะฝะธัะผะธ ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ. ะกะธััะตะผะฐ ัะฐะฑะพัะฐะตั ะฝะฐ ะพัะฝะพะฒะต WebSocket ะฟะพะดะบะปััะตะฝะธั ะบ Binance API ั ะฐัะธะฝััะพะฝะฝะพะน ะฐััะธัะตะบัััะพะน ะฝะฐ Python.

## 2. ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

- **ะฏะทัะบ**: Python 3.11+
- **ะคัะตะนะผะฒะพัะบ ะฑะพัะฐ**: Aiogram 3.x
- **ะะฐะทะฐ ะดะฐะฝะฝัั**: PostgreSQL (ะดะปั 10 ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะพะฟัะธะผะฐะปัะฝะพ)
- **ะะตัะธัะพะฒะฐะฝะธะต**: Redis
- **API ะดะฐะฝะฝัั**: Binance WebSocket API
- **ะะพะฝัะตะนะฝะตัะธะทะฐัะธั**: Docker Desktop
- **ะัะธะฝััะพะฝะฝะพััั**: asyncio, aiohttp

## 3. ะััะธัะตะบัััะฐ ัะธััะตะผั

### 3.1 ะกัััะบัััะฐ ะฟัะพะตะบัะฐ (ะผะฐะบัะธะผะฐะปัะฝะฐั ะผะพะดัะปัะฝะพััั)
```
crypto_bot/
โโโ src/
โ   โโโ bot/
โ   โ   โโโ handlers/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ start_handler.py              # ะะฑัะฐะฑะพัะบะฐ ะบะพะผะฐะฝะดั /start
โ   โ   โ   โโโ menu_handler.py               # ะะปะฐะฒะฝะพะต ะผะตะฝั
โ   โ   โ   โโโ add_pair_handler.py           # ะะพะฑะฐะฒะปะตะฝะธะต ะฟะฐัั
โ   โ   โ   โโโ remove_pair_handler.py        # ะฃะดะฐะปะตะฝะธะต ะฟะฐัั
โ   โ   โ   โโโ my_pairs_handler.py           # ะะพะธ ะฟะฐัั
โ   โ   โ   โโโ timeframes_handler.py         # ะัะฑะพั ัะฐะนะผััะตะนะผะพะฒ
โ   โ   โ   โโโ rsi_view_handler.py           # ะัะพัะผะพัั RSI
โ   โ   โ   โโโ settings_handler.py           # ะะฐัััะพะนะบะธ
โ   โ   โ   โโโ help_handler.py               # ะะพะผะพัั
โ   โ   โโโ keyboards/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ main_menu_kb.py               # ะะปะฐะฒะฝะพะต ะผะตะฝั
โ   โ   โ   โโโ pairs_list_kb.py              # ะกะฟะธัะพะบ ะฟะฐั
โ   โ   โ   โโโ timeframes_kb.py              # ะขะฐะนะผััะตะนะผั
โ   โ   โ   โโโ settings_kb.py                # ะะฐัััะพะนะบะธ
โ   โ   โ   โโโ confirmation_kb.py            # ะะพะดัะฒะตัะถะดะตะฝะธั
โ   โ   โ   โโโ back_to_menu_kb.py            # ะะพะทะฒัะฐั ะฒ ะผะตะฝั
โ   โ   โโโ middlewares/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ database_mw.py                # ะะพะดะบะปััะตะฝะธะต ะบ ะะ
โ   โ   โ   โโโ user_check_mw.py              # ะัะพะฒะตัะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปั
โ   โ   โ   โโโ error_handler_mw.py           # ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
โ   โ   โโโ states/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ pair_states.py                # ะกะพััะพัะฝะธั ะดะพะฑะฐะฒะปะตะฝะธั ะฟะฐั
โ   โ   โ   โโโ settings_states.py            # ะกะพััะพัะฝะธั ะฝะฐัััะพะตะบ
โ   โ   โโโ __init__.py
โ   โโโ data/
โ   โ   โโโ models/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ user_model.py                 # ะะพะดะตะปั ะฟะพะปัะทะพะฒะฐัะตะปั
โ   โ   โ   โโโ pair_model.py                 # ะะพะดะตะปั ะฟะฐัั
โ   โ   โ   โโโ user_pair_model.py            # ะกะฒัะทั ะฟะพะปัะทะพะฒะฐัะตะปั-ะฟะฐัะฐ
โ   โ   โ   โโโ candle_model.py               # ะะพะดะตะปั ัะฒะตัะธ
โ   โ   โ   โโโ signal_history_model.py       # ะััะพัะธั ัะธะณะฝะฐะปะพะฒ
โ   โ   โ   โโโ base_model.py                 # ะะฐะทะพะฒะฐั ะผะพะดะตะปั
โ   โ   โโโ repositories/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ base_repository.py            # ะะฐะทะพะฒัะน ัะตะฟะพะทะธัะพัะธะน
โ   โ   โ   โโโ user_repository.py            # ะะตะฟะพะทะธัะพัะธะน ะฟะพะปัะทะพะฒะฐัะตะปะตะน
โ   โ   โ   โโโ pair_repository.py            # ะะตะฟะพะทะธัะพัะธะน ะฟะฐั
โ   โ   โ   โโโ user_pair_repository.py       # ะะตะฟะพะทะธัะพัะธะน ัะฒัะทะตะน
โ   โ   โ   โโโ candle_repository.py          # ะะตะฟะพะทะธัะพัะธะน ัะฒะตัะตะน
โ   โ   โ   โโโ signal_repository.py          # ะะตะฟะพะทะธัะพัะธะน ัะธะณะฝะฐะปะพะฒ
โ   โ   โโโ migrations/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ create_users_table.py         # ะะธะณัะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
โ   โ   โ   โโโ create_pairs_table.py         # ะะธะณัะฐัะธั ะฟะฐั
โ   โ   โ   โโโ create_candles_table.py       # ะะธะณัะฐัะธั ัะฒะตัะตะน
โ   โ   โ   โโโ create_signals_table.py       # ะะธะณัะฐัะธั ัะธะณะฝะฐะปะพะฒ
โ   โ   โโโ database.py                       # ะะพะดะบะปััะตะฝะธะต ะบ ะะ
โ   โ   โโโ redis_client.py                   # ะะพะดะบะปััะตะฝะธะต ะบ Redis
โ   โโโ services/
โ   โ   โโโ websocket/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ binance_websocket.py          # WebSocket ะบะปะธะตะฝั
โ   โ   โ   โโโ stream_manager.py             # ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพัะพะบะฐะผะธ
โ   โ   โ   โโโ reconnection_handler.py       # ะะตัะตะฟะพะดะบะปััะตะฝะธะต
โ   โ   โ   โโโ data_processor.py             # ะะฑัะฐะฑะพัะบะฐ ะดะฐะฝะฝัั
โ   โ   โโโ indicators/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ rsi_calculator.py             # ะะฐััะตั RSI
โ   โ   โ   โโโ ema_calculator.py             # ะะฐััะตั EMA
โ   โ   โ   โโโ volume_analyzer.py            # ะะฝะฐะปะธะท ะพะฑัะตะผะฐ
โ   โ   โ   โโโ trend_analyzer.py             # ะะฝะฐะปะธะท ััะตะฝะดะฐ
โ   โ   โ   โโโ indicator_factory.py          # ะคะฐะฑัะธะบะฐ ะธะฝะดะธะบะฐัะพัะพะฒ
โ   โ   โโโ signals/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ rsi_signals.py                # RSI ัะธะณะฝะฐะปั
โ   โ   โ   โโโ ema_signals.py                # EMA ัะธะณะฝะฐะปั
โ   โ   โ   โโโ volume_signals.py             # ะะฑัะตะผะฝัะต ัะธะณะฝะฐะปั
โ   โ   โ   โโโ signal_aggregator.py          # ะะฑัะตะดะธะฝะตะฝะธะต ัะธะณะฝะฐะปะพะฒ
โ   โ   โ   โโโ signal_scheduler.py           # ะะปะฐะฝะธัะพะฒัะธะบ ัะธะณะฝะฐะปะพะฒ
โ   โ   โโโ notifications/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ telegram_sender.py            # ะัะฟัะฐะฒะบะฐ ะฒ Telegram
โ   โ   โ   โโโ message_formatter.py          # ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ัะพะพะฑัะตะฝะธะน
โ   โ   โ   โโโ notification_queue.py         # ะัะตัะตะดั ัะฒะตะดะพะผะปะตะฝะธะน
โ   โ   โ   โโโ rate_limiter.py               # ะะณัะฐะฝะธัะตะฝะธะต ัะฐััะพัั
โ   โ   โโโ data_fetchers/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ historical_fetcher.py         # ะััะพัะธัะตัะบะธะต ะดะฐะฝะฝัะต
โ   โ   โ   โโโ pair_validator.py             # ะะฐะปะธะดะฐัะธั ะฟะฐั
โ   โ   โ   โโโ market_data_fetcher.py        # ะัะฝะพัะฝัะต ะดะฐะฝะฝัะต
โ   โ   โโโ cache/
โ   โ   โ   โโโ __init__.py
โ   โ   โ   โโโ candle_cache.py               # ะะตั ัะฒะตัะตะน
โ   โ   โ   โโโ indicator_cache.py            # ะะตั ะธะฝะดะธะบะฐัะพัะพะฒ
โ   โ   โ   โโโ user_cache.py                 # ะะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
โ   โ   โ   โโโ cache_manager.py              # ะะตะฝะตะดะถะตั ะบะตัะฐ
โ   โ   โโโ __init__.py
โ   โโโ utils/
โ   โ   โโโ __init__.py
โ   โ   โโโ constants.py                      # ะะพะฝััะฐะฝัั
โ   โ   โโโ exceptions.py                     # ะะฐััะพะผะฝัะต ะธัะบะปััะตะฝะธั
โ   โ   โโโ logger.py                         # ะะฐัััะพะนะบะฐ ะปะพะณะธัะพะฒะฐะฝะธั
โ   โ   โโโ decorators.py                     # ะะตะบะพัะฐัะพัั
โ   โ   โโโ time_helpers.py                   # ะะฐะฑะพัะฐ ัะพ ะฒัะตะผะตะฝะตะผ
โ   โ   โโโ math_helpers.py                   # ะะฐัะตะผะฐัะธัะตัะบะธะต ััะฝะบัะธะธ
โ   โ   โโโ text_formatters.py                # ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ัะตะบััะฐ
โ   โ   โโโ validators.py                     # ะะฐะปะธะดะฐัะพัั
โ   โโโ config/
โ   โ   โโโ __init__.py
โ   โ   โโโ bot_config.py                     # ะะพะฝัะธะณััะฐัะธั ะฑะพัะฐ
โ   โ   โโโ database_config.py                # ะะพะฝัะธะณััะฐัะธั ะะ
โ   โ   โโโ redis_config.py                   # ะะพะฝัะธะณััะฐัะธั Redis
โ   โ   โโโ binance_config.py                 # ะะพะฝัะธะณััะฐัะธั Binance
โ   โ   โโโ logging_config.py                 # ะะพะฝัะธะณััะฐัะธั ะปะพะณะพะฒ
โ   โโโ main.py                               # ะขะพัะบะฐ ะฒัะพะดะฐ
โโโ tests/
โ   โโโ __init__.py
โ   โโโ unit/
โ   โ   โโโ test_indicators.py                # ะขะตััั ะธะฝะดะธะบะฐัะพัะพะฒ
โ   โ   โโโ test_repositories.py              # ะขะตััั ัะตะฟะพะทะธัะพัะธะตะฒ
โ   โ   โโโ test_services.py                  # ะขะตััั ัะตัะฒะธัะพะฒ
โ   โโโ integration/
โ   โ   โโโ test_websocket.py                 # ะขะตััั WebSocket
โ   โ   โโโ test_notifications.py             # ะขะตััั ัะฒะตะดะพะผะปะตะฝะธะน
โ   โโโ conftest.py                           # ะะพะฝัะธะณััะฐัะธั ัะตััะพะฒ
โโโ scripts/
โ   โโโ setup_database.py                     # ะะฐัััะพะนะบะฐ ะะ
โ   โโโ migrate.py                            # ะะฐะฟััะบ ะผะธะณัะฐัะธะน
โ   โโโ seed_data.py                          # ะขะตััะพะฒัะต ะดะฐะฝะฝัะต
โโโ docker-compose.yml
โโโ Dockerfile
โโโ requirements.txt
โโโ .env.example
โโโ .gitignore
โโโ README.md
```

### 3.2 ะะพะผะฟะพะฝะตะฝัั ัะธััะตะผั

#### 3.2.1 Bot Layer (Telegram ะธะฝัะตััะตะนั)
- **handlers/**: ะะฑัะฐะฑะพััะธะบะธ ะบะพะผะฐะฝะด ะธ callback'ะพะฒ
- **keyboards/**: Inline ะบะปะฐะฒะธะฐัััั ะดะปั ะฝะฐะฒะธะณะฐัะธะธ
- **middlewares/**: ะัะพะผะตะถััะพัะฝัะต ะพะฑัะฐะฑะพััะธะบะธ (ะฟะพะดะบะปััะตะฝะธะต ะบ ะะ)

#### 3.2.2 Data Layer (ะะฐะฑะพัะฐ ั ะดะฐะฝะฝัะผะธ)
- **models/**: SQLAlchemy ะผะพะดะตะปะธ
- **repositories/**: ะะฐััะตัะฝ Repository ะดะปั ัะฐะฑะพัั ั ะะ
- **database.py**: ะะพะดะบะปััะตะฝะธะต ะธ ะบะพะฝัะธะณััะฐัะธั ะะ

#### 3.2.3 Services Layer (ะะธะทะฝะตั ะปะพะณะธะบะฐ)
- **binance_service.py**: WebSocket ะฟะพะดะบะปััะตะฝะธะต ะธ ะพะฑัะฐะฑะพัะบะฐ ะดะฐะฝะฝัั
- **indicator_service.py**: ะะฐััะตั ัะตัะฝะธัะตัะบะธั ะธะฝะดะธะบะฐัะพัะพะฒ
- **signal_service.py**: ะะตะฝะตัะฐัะธั ัะธะณะฝะฐะปะพะฒ
- **notification_service.py**: ะัะฟัะฐะฒะบะฐ ัะฒะตะดะพะผะปะตะฝะธะน

#### 3.2.4 Utils Layer (ะัะฟะพะผะพะณะฐัะตะปัะฝัะต ััะฝะบัะธะธ)
- **indicators.py**: ะะฐัะตะผะฐัะธัะตัะบะธะต ััะฝะบัะธะธ ะดะปั ะธะฝะดะธะบะฐัะพัะพะฒ
- **validators.py**: ะะฐะปะธะดะฐัะธั ะฒัะพะดะฝัั ะดะฐะฝะฝัั
- **formatters.py**: ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ัะพะพะฑัะตะฝะธะน

## 4. ะคัะฝะบัะธะพะฝะฐะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

### 4.1 ะะพะปัะทะพะฒะฐัะตะปััะบะธะน ะธะฝัะตััะตะนั

#### 4.1.1 ะะปะฐะฒะฝะพะต ะผะตะฝั
ะัะธ ะบะพะผะฐะฝะดะต `/start` ะฟะพะปัะทะพะฒะฐัะตะปั ัะตะณะธัััะธััะตััั ะฒ ะะ ะธ ะฒะธะดะธั ะผะตะฝั:
- ๐ **ะะพะธ ะฟะฐัั**
- โ **ะะพะฑะฐะฒะธัั ะฟะฐัั**
- โ **ะฃะดะฐะปะธัั ะฟะฐัั**
- โ๏ธ **ะะฐัััะพะนะบะธ**
- โ **ะะพะผะพัั**

#### 4.1.2 ะะพะฑะฐะฒะธัั ะฟะฐัั
- ะะพะปัะทะพะฒะฐัะตะปั ะฒะฒะพะดะธั ัะธะบะตั (ะฝะฐะฟัะธะผะตั: SOL)
- ะกะธััะตะผะฐ ะฒะฐะปะธะดะธััะตั ัััะตััะฒะพะฒะฐะฝะธะต ะฟะฐัั SOL/USDT ะฝะฐ Binance
- ะกะบะฐัะธะฒะฐัััั ะธััะพัะธัะตัะบะธะต ะดะฐะฝะฝัะต ะดะปั ะฒัะตั ัะฐะนะผััะตะนะผะพะฒ
- ะะฐัะฐ ะดะพะฑะฐะฒะปัะตััั ะฒ ะะ ะธ Redis ะบะตั

#### 4.1.3 ะฃะดะฐะปะธัั ะฟะฐัั
- ะะพะบะฐะทัะฒะฐะตััั ัะฟะธัะพะบ ะฒัะตั ะฟะฐั ะฟะพะปัะทะพะฒะฐัะตะปั
- ะะพ ะบะฝะพะฟะบะต ัะดะฐะปัะตััั ะฟะฐัะฐ ะธะท ะพััะปะตะถะธะฒะฐะฝะธั
- ะะฐะฝะฝัะต ะพััะฐัััั ะฒ ะะ ะดะปั ะฒะพะทะผะพะถะฝะพะณะพ ะฟะพะฒัะพัะฝะพะณะพ ะดะพะฑะฐะฒะปะตะฝะธั

#### 4.1.4 ะะพะธ ะฟะฐัั
- ะกะฟะธัะพะบ ะฒัะตั ะพััะปะตะถะธะฒะฐะตะผัั ะฟะฐั
- ะัะธ ะฝะฐะถะฐัะธะธ ะฝะฐ ะฟะฐัั ะพัะบััะฒะฐะตััั ะผะตะฝั ัะฐะนะผััะตะนะผะพะฒ:
  - 1m, 5m, 15m, 1h, 2h, 4h, 1d, 1w
  - ะะตัะตะบะปััะฐัะตะปะธ ะะะ/ะะซะะ ะดะปั ะบะฐะถะดะพะณะพ ัะฐะนะผััะตะนะผะฐ
  - ะะฝะพะฟะบะฐ **RSI** - ะฟะพะบะฐะทัะฒะฐะตั ัะตะบััะธะต ะทะฝะฐัะตะฝะธั RSI ะฝะฐ ะฒัะตั ัะฐะนะผััะตะนะผะฐั

#### 4.1.5 ะะฐัััะพะนะบะธ
- ะะตัะตะบะปััะฐัะตะปั: **ะฃะฒะตะดะพะผะปะตะฝะธั ะะะ/ะะซะะ**

#### 4.1.6 ะะพะผะพัั
- ะะฝััััะบัะธั ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะฑะพัะฐ
- ะะฟะธัะฐะฝะธะต ะธะฝะดะธะบะฐัะพัะพะฒ ะธ ัะธะณะฝะฐะปะพะฒ

### 4.2 ะกะธััะตะผะฐ ัะฒะตะดะพะผะปะตะฝะธะน

#### 4.2.1 ะคะพัะผะฐั ัะฒะตะดะพะผะปะตะฝะธั
```
๐ด SOL/USDT - 15m
ะฆะตะฝะฐ: $142.35 (+2.4%)
RSI: 23.5 (ััะตะดะฝัั ะฟะตัะตะฟัะพะดะฐะฝะฝะพััั)
ะะฑัะตะผ: +150% ะพั ะฟัะตะดัะดััะตะน ัะฒะตัะธ
EMA ััะตะฝะด: ะฝะธััะพะดััะธะน
```

#### 4.2.2 ะะฝะพะฟะบะฐ ะฒะพะทะฒัะฐัะฐ
ะ ะบะฐะถะดะพะผ ัะฒะตะดะพะผะปะตะฝะธะธ ะบะฝะพะฟะบะฐ **๐ฑ ะะตะฝั** ะดะปั ะฑััััะพะณะพ ะฒะพะทะฒัะฐัะฐ ะฒ ะณะปะฐะฒะฝะพะต ะผะตะฝั.

### 4.3 ะะฝะดะธะบะฐัะพัั ะธ ัะธะณะฝะฐะปั

#### 4.3.1 RSI (Relative Strength Index)
**ะะพะฝั ัะธะณะฝะฐะปะพะฒ:**
- RSI < 20: ๐ด ะกะธะปัะฝะฐั ะฟะตัะตะฟัะพะดะฐะฝะฝะพััั
- RSI < 25: ๐ ะกัะตะดะฝัั ะฟะตัะตะฟัะพะดะฐะฝะฝะพััั
- RSI < 30: ๐ก ะะฑััะฝะฐั ะฟะตัะตะฟัะพะดะฐะฝะฝะพััั
- RSI > 70: ๐ก ะะฑััะฝะฐั ะฟะตัะตะบัะฟะปะตะฝะฝะพััั
- RSI > 75: ๐ ะกัะตะดะฝัั ะฟะตัะตะบัะฟะปะตะฝะฝะพััั
- RSI > 80: ๐ด ะกะธะปัะฝะฐั ะฟะตัะตะบัะฟะปะตะฝะฝะพััั

**ะะพะณะธะบะฐ ัะฒะตะดะพะผะปะตะฝะธะน:**
- ะกะธะณะฝะฐะป ะพัะฟัะฐะฒะปัะตััั ะฟัะธ ะฒัะพะดะต ะฒ ะทะพะฝั
- ะะพะฒัะพััะตััั ะบะฐะถะดัะต 2 ะผะธะฝััั ะฟะพะบะฐ RSI ะฒ ะทะพะฝะต ะธะปะธ ัะณะปัะฑะปัะตััั

#### 4.3.2 EMA (Exponential Moving Average)
**ะะตัะธะพะดั**: 20, 50, 100, 200

**ะกะธะณะฝะฐะปั:**
- ะะตัะตัะตัะตะฝะธะต ัะตะฝั ะฒััะต/ะฝะธะถะต EMA200 (ะพัะฝะพะฒะฝะพะน ััะตะฝะด)
- ะะตัะตัะตัะตะฝะธะต ะฑัััััั EMA (20) ั ะผะตะดะปะตะฝะฝัะผะธ (50, 100)
- ะััััะฐะธะฒะฐะฝะธะต ะฒัะตั EMA ะฒ ะฒะพััะพะดััะตะผ/ะฝะธััะพะดััะตะผ ะฟะพััะดะบะต

#### 4.3.3 ะะฑัะตะผ ัะพัะณะพะฒ
- ะกัะฐะฒะฝะตะฝะธะต ั ะพะฑัะตะผะพะผ ะฟัะตะดัะดััะตะน ัะฒะตัะธ
- ะะพะบะฐะทัะฒะฐะตััั ัะพะปัะบะพ ะฟัะธ RSI ัะธะณะฝะฐะปะฐั
- ะคะพัะผะฐั: "+150%" ะธะปะธ "-30%"

## 5. ะขะตัะฝะธัะตัะบะธะต ััะตะฑะพะฒะฐะฝะธั

### 5.1 ะะฐะทะฐ ะดะฐะฝะฝัั PostgreSQL

#### 5.1.1 ะขะฐะฑะปะธัะฐ users
```sql
CREATE TABLE users (
    id BIGINT PRIMARY KEY,  -- telegram_user_id
    username VARCHAR(255),
    first_name VARCHAR(255),
    notifications_enabled BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.2 ะขะฐะฑะปะธัะฐ pairs
```sql
CREATE TABLE pairs (
    id SERIAL PRIMARY KEY,
    symbol VARCHAR(20) NOT NULL UNIQUE,  -- 'SOLUSDT'
    base_asset VARCHAR(10) NOT NULL,     -- 'SOL'
    quote_asset VARCHAR(10) NOT NULL,    -- 'USDT'
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT NOW()
);
```

#### 5.1.3 ะขะฐะฑะปะธัะฐ user_pairs
```sql
CREATE TABLE user_pairs (
    user_id BIGINT REFERENCES users(id),
    pair_id INTEGER REFERENCES pairs(id),
    timeframes JSONB,  -- {'1m': true, '5m': false, ...}
    created_at TIMESTAMP DEFAULT NOW(),
    PRIMARY KEY (user_id, pair_id)
);
```

#### 5.1.4 ะขะฐะฑะปะธัะฐ candles
```sql
CREATE TABLE candles (
    id SERIAL PRIMARY KEY,
    pair_id INTEGER REFERENCES pairs(id),
    timeframe VARCHAR(5) NOT NULL,  -- '1m', '5m', etc.
    open_time BIGINT NOT NULL,
    close_time BIGINT NOT NULL,
    open_price DECIMAL(18,8) NOT NULL,
    high_price DECIMAL(18,8) NOT NULL,
    low_price DECIMAL(18,8) NOT NULL,
    close_price DECIMAL(18,8) NOT NULL,
    volume DECIMAL(18,8) NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(pair_id, timeframe, open_time)
);
```

#### 5.1.5 ะขะฐะฑะปะธัะฐ signals_history
```sql
CREATE TABLE signals_history (
    id SERIAL PRIMARY KEY,
    user_id BIGINT REFERENCES users(id),
    pair_id INTEGER REFERENCES pairs(id),
    timeframe VARCHAR(5) NOT NULL,
    signal_type VARCHAR(50) NOT NULL,  -- 'rsi_oversold', 'ema_cross'
    signal_value DECIMAL(10,4),
    price DECIMAL(18,8) NOT NULL,
    sent_at TIMESTAMP DEFAULT NOW()
);
```

### 5.2 Redis ะบะตัะธัะพะฒะฐะฝะธะต

#### 5.2.1 ะกัััะบัััั ะบะตัะฐ
```
candles:{symbol}:{timeframe} -> List[Candle] (ะฟะพัะปะตะดะฝะธะต 500 ัะฒะตัะตะน)
rsi:{symbol}:{timeframe} -> float (ัะตะบััะตะต ะทะฝะฐัะตะฝะธะต RSI)
ema:{symbol}:{timeframe}:{period} -> float (ะทะฝะฐัะตะฝะธะต EMA)
volume_change:{symbol}:{timeframe} -> float (ะธะทะผะตะฝะตะฝะธะต ะพะฑัะตะผะฐ %)
last_signal:{user_id}:{symbol}:{timeframe}:{signal_type} -> timestamp
```

### 5.3 WebSocket ะฟะพะดะบะปััะตะฝะธะต ะบ Binance

#### 5.3.1 ะะพัะพะบะธ ะดะฐะฝะฝัั
- ะะดะธะฝ WebSocket ะดะปั ะฒัะตั ะฟะฐั ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- ะะพะดะฟะธัะบะฐ ะฝะฐ kline ะฟะพัะพะบะธ ะดะปั ะบะฐะถะดะพะณะพ ัะฐะนะผััะตะนะผะฐ
- ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟะตัะตะฟะพะดะบะปััะตะฝะธะต ะฟัะธ ัะฐะทััะฒะต ัะพะตะดะธะฝะตะฝะธั

#### 5.3.2 ะะฑัะฐะฑะพัะบะฐ ะดะฐะฝะฝัั
```python
async def handle_kline_data(data):
    # ะกะพััะฐะฝะธัั ัะฒะตัั ะฒ ะะ ะธ Redis
    # ะะฐัััะธัะฐัั ะธะฝะดะธะบะฐัะพัั
    # ะัะพะฒะตัะธัั ััะปะพะฒะธั ัะธะณะฝะฐะปะพะฒ
    # ะัะฟัะฐะฒะธัั ัะฒะตะดะพะผะปะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปัะผ
```

### 5.4 ะกะธััะตะผะฐ ะธะฝะดะธะบะฐัะพัะพะฒ

#### 5.4.1 RSI ัะฐััะตั
```python
def calculate_rsi(prices: List[float], period: int = 14) -> float:
    # ะกัะฐะฝะดะฐััะฝัะน ะฐะปะณะพัะธัะผ RSI
    # ะะพะทะฒัะฐัะฐะตั ะทะฝะฐัะตะฝะธะต 0-100
```

#### 5.4.2 EMA ัะฐััะตั
```python
def calculate_ema(prices: List[float], period: int) -> float:
    # ะญะบัะฟะพะฝะตะฝัะธะฐะปัะฝะพะต ัะบะพะปัะทััะตะต ััะตะดะฝะตะต
    # ะคะพัะผัะปะฐ: EMA = (price * 2/(period+1)) + (prev_EMA * (1 - 2/(period+1)))
```

### 5.5 ะกะธััะตะผะฐ ัะฒะตะดะพะผะปะตะฝะธะน

#### 5.5.1 ะัะพะฒะตัะบะฐ ััะปะพะฒะธะน ัะธะณะฝะฐะปะพะฒ
```python
async def check_rsi_signals(user_id, symbol, timeframe, rsi_value):
    # ะัะพะฒะตัะธัั ะทะพะฝั RSI
    # ะัะพะฒะตัะธัั ะฒัะตะผั ะฟะพัะปะตะดะฝะตะณะพ ัะธะณะฝะฐะปะฐ (2 ะผะธะฝััั)
    # ะัะฟัะฐะฒะธัั ัะฒะตะดะพะผะปะตะฝะธะต ะตัะปะธ ะฝัะถะฝะพ
```

#### 5.5.2 ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ัะพะพะฑัะตะฝะธะน
```python
def format_signal_message(symbol, timeframe, price, price_change, rsi, volume_change, ema_trend):
    # ะกะพะทะดะฐัั ะบัะฐัะธะฒะพะต ัะพะพะฑัะตะฝะธะต ั ัะผะพะดะทะธ
    # ะะพะฑะฐะฒะธัั inline ะบะฝะพะฟะบั "ะะตะฝั"
```

## 6. ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั ะธ ะผะฐัััะฐะฑะธััะตะผะพััั

### 6.1 ะะฟัะธะผะธะทะฐัะธั
- ะะฐะบะตัะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ัะฒะตัะตะน
- ะะตัะธัะพะฒะฐะฝะธะต ะฒััะธัะปะตะฝะธะน ะฒ Redis
- ะัะธะฝััะพะฝะฝะฐั ะพะฑัะฐะฑะพัะบะฐ WebSocket ะดะฐะฝะฝัั
- ะะฝะดะตะบัั ะะ ะฝะฐ ัะฐััะพ ะธัะฟะพะปัะทัะตะผัั ะฟะพะปัั

### 6.2 ะะพะฝะธัะพัะธะฝะณ
- ะะพะณะธัะพะฒะฐะฝะธะต ะฒัะตั ะพะฟะตัะฐัะธะน
- ะะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
- ะะฑัะฐะฑะพัะบะฐ ะธัะบะปััะตะฝะธะน ั retry ะผะตัะฐะฝะธะทะผะพะผ

## 7. ะะฐะทะฒะตัััะฒะฐะฝะธะต

### 7.1 Docker Compose
```yaml
version: '3.8'
services:
  bot:
    build: .
    depends_on:
      - postgres
      - redis
    environment:
      - BOT_TOKEN=${BOT_TOKEN}
      - DATABASE_URL=${DATABASE_URL}
      - REDIS_URL=${REDIS_URL}

  postgres:
    image: postgres:15
    environment:
      - POSTGRES_DB=crypto_bot
      - POSTGRES_USER=crypto_user
      - POSTGRES_PASSWORD=crypto_pass
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:
```

### 7.2 ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั
```
BOT_TOKEN=your_telegram_bot_token
DATABASE_URL=postgresql://crypto_user:crypto_pass@postgres:5432/crypto_bot
REDIS_URL=redis://redis:6379/0
BINANCE_BASE_URL=wss://stream.binance.com:9443/ws
```

## 8. ะญัะฐะฟั ัะฐะทัะฐะฑะพัะบะธ

### ะญัะฐะฟ 1: ะะฝััะฐััััะบัััะฐ (1-2 ะดะฝั)
- ะะฐัััะพะนะบะฐ Docker ะพะบััะถะตะฝะธั
- ะกะพะทะดะฐะฝะธะต ะผะพะดะตะปะตะน ะะ
- ะะฐะทะพะฒัะน Telegram ะฑะพั

### ะญัะฐะฟ 2: ะัะฝะพะฒะฝะพะน ััะฝะบัะธะพะฝะฐะป (3-4 ะดะฝั)
- WebSocket ะฟะพะดะบะปััะตะฝะธะต ะบ Binance
- ะกะธััะตะผะฐ ะดะพะฑะฐะฒะปะตะฝะธั/ัะดะฐะปะตะฝะธั ะฟะฐั
- ะะฐะทะพะฒัะต ะธะฝะดะธะบะฐัะพัั (RSI, EMA)

### ะญัะฐะฟ 3: ะฃะฒะตะดะพะผะปะตะฝะธั (2-3 ะดะฝั)
- ะกะธััะตะผะฐ ัะธะณะฝะฐะปะพะฒ
- ะคะพัะผะฐัะธัะพะฒะฐะฝะธะต ัะพะพะฑัะตะฝะธะน
- ะะพะปัะทะพะฒะฐัะตะปััะบะธะต ะฝะฐัััะพะนะบะธ

### ะญัะฐะฟ 4: ะะฟัะธะผะธะทะฐัะธั (1-2 ะดะฝั)
- ะะตัะธัะพะฒะฐะฝะธะต ะฒ Redis
- ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
- ะขะตััะธัะพะฒะฐะฝะธะต ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

## 9. ะะตัะพะปัะฝะฐั ะบะพะฝัะธะณััะฐัะธั

### 9.1 ะัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต
ะะฐะถะดัะน ะฝะพะฒัะน ะฟะพะปัะทะพะฒะฐัะตะปั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะปััะฐะตั:
- ะะฐัั BTC/USDT ะฒ ะพััะปะตะถะธะฒะฐะฝะธะธ
- ะัะต ัะฐะนะผััะตะนะผั ะฒะบะปััะตะฝั: 1m, 5m, 15m, 1h, 2h, 4h, 1d, 1w
- ะฃะฒะตะดะพะผะปะตะฝะธั ะฒะบะปััะตะฝั

### 9.2 ะััะพัะธัะตัะบะธะต ะดะฐะฝะฝัะต
- ะัะธ ะดะพะฑะฐะฒะปะตะฝะธะธ ะฝะพะฒะพะน ะฟะฐัั ัะบะฐัะธะฒะฐัััั ะฟะพัะปะตะดะฝะธะต 500 ัะฒะตัะตะน ะดะปั ะบะฐะถะดะพะณะพ ัะฐะนะผััะตะนะผะฐ
- ะะฐะฝะฝัะต ัะพััะฐะฝััััั ะฒ ะะ ะธ ะบะตัะธัััััั ะฒ Redis
- ะัะปะธ ะดะฐะฝะฝัะต ัะถะต ะตััั - ะฟัะพะฟััะบะฐะตััั ัะบะฐัะธะฒะฐะฝะธะต

## 10. ะขัะตะฑะพะฒะฐะฝะธั ะบ ะผะพะดัะปัะฝะพััะธ ะบะพะดะฐ

### 10.1 ะะฑัะธะต ะฟัะฐะฒะธะปะฐ
- **ะะฐะบัะธะผัะผ 1000 ัััะพะบ** ะฒ ะบะฐะถะดะพะผ ัะฐะนะปะต
- ะ ะฝะฐัะฐะปะต ะบะฐะถะดะพะณะพ ัะฐะนะปะฐ ะพะฑัะทะฐัะตะปัะฝัะน ะบะพะผะผะตะฝัะฐัะธะน ั ะฟััะตะผ
- ะะดะฝะฐ ะพัะฒะตัััะฒะตะฝะฝะพััั ะฝะฐ ะบะปะฐัั/ััะฝะบัะธั
- ะงะตัะบะพะต ัะฐะทะดะตะปะตะฝะธะต ัะปะพะตะฒ ะฐััะธัะตะบัััั

### 10.2 ะจะฐะฑะปะพะฝ ะทะฐะณะพะปะพะฒะบะฐ ัะฐะนะปะฐ
```python
"""
ะััั: src/services/indicators/rsi_calculator.py
ะะฟะธัะฐะฝะธะต: ะกะตัะฒะธั ะดะปั ัะฐััะตัะฐ ะธะฝะดะธะบะฐัะพัะฐ RSI (Relative Strength Index)
ะะฒัะพั: Crypto Bot Team
ะะฐัะฐ ัะพะทะดะฐะฝะธั: 2025-07-28
"""

import asyncio
from typing import List, Optional
from decimal import Decimal

# ะััะฐะปัะฝะพะน ะบะพะด ัะฐะนะปะฐ...
```

### 10.3 ะัะธะฝัะธะฟั ัะฐะทะฑะธะตะฝะธั

#### 10.3.1 Handlers (ะะฑัะฐะฑะพััะธะบะธ)
- ะะฐะถะดัะน handler ะพัะฒะตัะฐะตั ะทะฐ ะพะดะฝั ััะฝะบัะธั ะผะตะฝั
- ะะฐะบัะธะผัะผ 10-15 ััะฝะบัะธะน ะฒ ัะฐะนะปะต
- ะะพะณะธะบะฐ ะฒัะฝะตัะตะฝะฐ ะฒ ัะตัะฒะธัั

#### 10.3.2 Services (ะกะตัะฒะธัั)
- ะะฐะทะฑะธัั ะฟะพ ะดะพะผะตะฝะฐะผ (websocket, indicators, signals, notifications)
- ะะฐะถะดัะน ัะตัะฒะธั ัะตัะฐะตั ะพะดะฝั ะทะฐะดะฐัั
- ะะฐะบัะธะผัะผ 20-25 ะผะตัะพะดะพะฒ ะฒ ะบะปะฐััะต

#### 10.3.3 Repositories (ะะตะฟะพะทะธัะพัะธะธ)
- ะะดะธะฝ ัะตะฟะพะทะธัะพัะธะน ะฝะฐ ะผะพะดะตะปั
- CRUD ะพะฟะตัะฐัะธะธ ัะฐะทะฑะธัั ะฝะฐ ะพัะดะตะปัะฝัะต ะผะตัะพะดั
- ะกะปะพะถะฝัะต ะทะฐะฟัะพัั ะฒ ะพัะดะตะปัะฝัั ะผะตัะพะดะฐั

#### 10.3.4 Models (ะะพะดะตะปะธ)
- ะะดะฝะฐ ะผะพะดะตะปั ะฝะฐ ัะฐะนะป
- ะกะฒัะทะธ ะฒัะฝะตัะตะฝั ะฒ ะพัะดะตะปัะฝัะต ะผะตัะพะดั
- ะะฐะปะธะดะฐัะธั ะฒ ะพัะดะตะปัะฝัั ะผะตัะพะดะฐั

### 10.4 ะัะธะผะตั ััััะบัััั ะฑะพะปััะพะณะพ ัะตัะฒะธัะฐ

**src/services/websocket/binance_websocket.py** (ะพัะฝะพะฒะฝะพะน ะบะปะฐัั):
```python
"""
ะััั: src/services/websocket/binance_websocket.py
ะะฟะธัะฐะฝะธะต: ะัะฝะพะฒะฝะพะน WebSocket ะบะปะธะตะฝั ะดะปั Binance API
"""
class BinanceWebSocketClient:
    # ะขะพะปัะบะพ ะพัะฝะพะฒะฝัะต ะผะตัะพะดั ะฟะพะดะบะปััะตะฝะธั
    # ~300-400 ัััะพะบ
```

**src/services/websocket/stream_manager.py** (ัะฟัะฐะฒะปะตะฝะธะต ะฟะพัะพะบะฐะผะธ):
```python
"""
ะััั: src/services/websocket/stream_manager.py
ะะฟะธัะฐะฝะธะต: ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพัะพะบะฐะผะธ ะดะฐะฝะฝัั WebSocket
"""
class StreamManager:
    # ะะพะดะฟะธัะบะฐ/ะพัะฟะธัะบะฐ ะพั ะฟะพัะพะบะพะฒ
    # ~200-300 ัััะพะบ
```

**src/services/websocket/data_processor.py** (ะพะฑัะฐะฑะพัะบะฐ ะดะฐะฝะฝัั):
```python
"""
ะััั: src/services/websocket/data_processor.py
ะะฟะธัะฐะฝะธะต: ะะฑัะฐะฑะพัะบะฐ ะฒัะพะดััะธั ะดะฐะฝะฝัั ะพั WebSocket
"""
class DataProcessor:
    # ะะฐััะธะฝะณ ะธ ะฒะฐะปะธะดะฐัะธั ะดะฐะฝะฝัั
    # ~400-500 ัััะพะบ
```