"""
–ü—É—Ç—å: src/bot/handlers/add_pair/add_pair_formatters.py
–û–ø–∏—Å–∞–Ω–∏–µ: –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä
–ê–≤—Ç–æ—Ä: Crypto Bot Team
–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: 2025-07-28
"""

from config.bot_config import get_bot_config


def create_add_pair_instruction() -> str:
    """
    –°–æ–∑–¥–∞—Ç—å —Ç–µ–∫—Å—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—ã.

    Returns:
        str: –¢–µ–∫—Å—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
    """
    return """‚ûï <b>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—Ä—ã</b>

–í–≤–µ–¥–∏—Ç–µ —Å–∏–º–≤–æ–ª –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã –∏–ª–∏ –ø–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤–æ–π –ø–∞—Ä—ã:

<b>–ü—Ä–∏–º–µ—Ä—ã:</b>
‚Ä¢ <code>BTC</code> - –¥–ª—è BTC/USDT
‚Ä¢ <code>ETH</code> - –¥–ª—è ETH/USDT
‚Ä¢ <code>SOL</code> - –¥–ª—è SOL/USDT
‚Ä¢ <code>ADAUSDT</code> - –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞

<b>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ—Ç–∏—Ä—É–µ–º—ã–µ –≤–∞–ª—é—Ç—ã:</b>
USDT, BTC, ETH, BNB

<i>–ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ —è –ø—Ä–æ–≤–µ—Ä—é –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–∞—Ä—ã –Ω–∞ Binance –∏ –ø—Ä–µ–¥–ª–æ–∂—É –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ.</i>"""


def create_pair_confirmation_text(symbol_info: dict) -> str:
    """
    –°–æ–∑–¥–∞—Ç—å —Ç–µ–∫—Å—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—ã.

    Args:
        symbol_info: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ä–µ

    Returns:
        str: –¢–µ–∫—Å—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    """
    config = get_bot_config()

    # –ë–µ–∑–æ–ø–∞—Å–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ symbol_info
    display_name = symbol_info.get('display_name', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')
    symbol = symbol_info.get('symbol', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')
    base_asset = symbol_info.get('base_asset', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')
    quote_asset = symbol_info.get('quote_asset', '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ')
    is_new_pair = symbol_info.get('is_new_pair', False)

    # –≠–∫—Ä–∞–Ω–∏—Ä—É–µ–º HTML —Å–∏–º–≤–æ–ª—ã –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
    display_name_safe = str(display_name).replace('<', '&lt;').replace('>', '&gt;')
    symbol_safe = str(symbol).replace('<', '&lt;').replace('>', '&gt;')
    base_asset_safe = str(base_asset).replace('<', '&lt;').replace('>', '&gt;')
    quote_asset_safe = str(quote_asset).replace('<', '&lt;').replace('>', '&gt;')

    timeframes_text = ', '.join(config.default_timeframes)

    return f"""‚úÖ <b>–¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞ –Ω–∞–π–¥–µ–Ω–∞!</b>

<b>–ü–∞—Ä–∞:</b> {display_name_safe}
<b>–°–∏–º–≤–æ–ª:</b> {symbol_safe}
<b>–ë–∞–∑–æ–≤–∞—è –≤–∞–ª—é—Ç–∞:</b> {base_asset_safe}
<b>–ö–æ—Ç–∏—Ä—É–µ–º–∞—è –≤–∞–ª—é—Ç–∞:</b> {quote_asset_safe}

<b>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:</b>
- –í—Å–µ —Ç–∞–π–º—Ñ—Ä–µ–π–º—ã –≤–∫–ª—é—á–µ–Ω—ã: {timeframes_text}
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã
- RSI –∑–æ–Ω—ã: –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å &lt;30, –ø–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å &gt;70

<i>üìä {'–ë—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤' if is_new_pair else '–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã'}</i>

<b>–î–æ–±–∞–≤–∏—Ç—å —ç—Ç—É –ø–∞—Ä—É –≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ?</b>"""

def create_pair_error_text(error_type: str, symbol_input: str) -> str:
    """
    –°–æ–∑–¥–∞—Ç—å —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä—ã.

    Args:
        error_type: –¢–∏–ø –æ—à–∏–±–∫–∏
        symbol_input: –í–≤–µ–¥–µ–Ω–Ω—ã–π —Å–∏–º–≤–æ–ª

    Returns:
        str: –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
    """
    error_messages = {
        "invalid_format": f"""‚ùå <b>–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–∏–º–≤–æ–ª–∞</b>

–°–∏–º–≤–æ–ª '{symbol_input}' –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç—É —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä Binance.

<b>–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã:</b>
‚Ä¢ BTC (–¥–ª—è BTC/USDT)
‚Ä¢ ETHUSDT (–ø–æ–ª–Ω—ã–π —Å–∏–º–≤–æ–ª)
‚Ä¢ SOL (–¥–ª—è SOL/USDT)

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.""",

        "already_exists": f"""‚ÑπÔ∏è <b>–ü–∞—Ä–∞ —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞</b>

–¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞ {symbol_input.upper()} —É–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –≤–∞—à–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏.

<b>–ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:</b>
‚Ä¢ –£–ø—Ä–∞–≤–ª—è—Ç—å —ç—Ç–æ–π –ø–∞—Ä–æ–π —á–µ—Ä–µ–∑ "üìà –ú–æ–∏ –ø–∞—Ä—ã"
‚Ä¢ –î–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥—É—é —Ç–æ—Ä–≥–æ–≤—É—é –ø–∞—Ä—É
‚Ä¢ –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é""",

        "not_found": f"""‚ùå <b>–ü–∞—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</b>

–¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞ '{symbol_input}' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –Ω–∞ –±–∏—Ä–∂–µ Binance.

<b>–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:</b>
‚Ä¢ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Å–∏–º–≤–æ–ª–∞
‚Ä¢ –ü–∞—Ä–∞ –Ω–µ —Ç–æ—Ä–≥—É–µ—Ç—Å—è –Ω–∞ Binance
‚Ä¢ –ü–∞—Ä–∞ –±—ã–ª–∞ –¥–µ–ª–∏—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–º–≤–æ–ª –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.""",

        "processing_error": f"""‚ö†Ô∏è <b>–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏</b>

–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–∏–º–≤–æ–ª–∞ '{symbol_input}'.

<b>–ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:</b>
‚Ä¢ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –µ—â–µ —Ä–∞–∑
‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
‚Ä¢ –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—É –ø–æ–∑–∂–µ."""
    }

    return error_messages.get(error_type, f"""‚ùå <b>–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞</b>

–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–∏–º–≤–æ–ª–∞ '{symbol_input}'.

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.""")


def create_pair_added_text(result: dict) -> str:
    """
    –°–æ–∑–¥–∞—Ç—å —Ç–µ–∫—Å—Ç —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—ã.

    Args:
        result: –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—ã

    Returns:
        str: –¢–µ–∫—Å—Ç —É—Å–ø–µ—Ö–∞
    """
    pair_info = result.get("pair")
    historical_candles = result.get("historical_candles", 0)
    timeframes = result.get("timeframes", [])

    text = f"""‚úÖ <b>–ü–∞—Ä–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞!</b>

<b>–¢–æ—Ä–≥–æ–≤–∞—è –ø–∞—Ä–∞:</b> {result['display_name']}
<b>–°–∏–º–≤–æ–ª:</b> {result['symbol']}

<b>–ù–∞—Å—Ç—Ä–æ–π–∫–∏:</b>
‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–∞–π–º—Ñ—Ä–µ–π–º—ã: {len(timeframes)}
‚Ä¢ –°–ø–∏—Å–æ–∫: {', '.join(timeframes)}
‚Ä¢ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: –≤–∫–ª—é—á–µ–Ω—ã

<b>–î–∞–Ω–Ω—ã–µ:</b>"""

    if historical_candles > 0:
        text += f"\n‚Ä¢ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Å–≤–µ—á–µ–π: {historical_candles}"
        text += f"\n‚Ä¢ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞—Å—á–µ—Ç—É"
    else:
        text += f"\n‚Ä¢ –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ —Ñ–æ–Ω–µ"
        text += f"\n‚Ä¢ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞–Ω—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ 1-2 –º–∏–Ω—É—Ç—ã"

    text += f"""

<b>–ß—Ç–æ –¥–∞–ª—å—à–µ?</b>
‚Ä¢ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å RSI —á–µ—Ä–µ–∑ "üìà –ú–æ–∏ –ø–∞—Ä—ã"
‚Ä¢ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ç–∞–π–º—Ñ—Ä–µ–π–º—ã
‚Ä¢ –ü–æ–ª—É—á–∞—Ç—å —Ç–æ—Ä–≥–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã

<i>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –¢–µ–ø–µ—Ä—å –≤—ã –±—É–¥–µ—Ç–µ –ø–æ–ª—É—á–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã –ø–æ —ç—Ç–æ–π –ø–∞—Ä–µ.</i>"""

    return text


def create_add_error_text(error: str) -> str:
    """
    –°–æ–∑–¥–∞—Ç—å —Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—ã.

    Args:
        error: –û–ø–∏—Å–∞–Ω–∏–µ –æ—à–∏–±–∫–∏

    Returns:
        str: –¢–µ–∫—Å—Ç –æ—à–∏–±–∫–∏
    """
    return f"""‚ùå <b>–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—ã</b>

{error}

<b>–ß—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:</b>
‚Ä¢ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—É –µ—â–µ —Ä–∞–∑
‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Å–∏–º–≤–æ–ª–∞
‚Ä¢ –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

–í—ã –º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ."""


def create_validation_loading_text(symbol: str) -> str:
    """
    –°–æ–∑–¥–∞—Ç—å —Ç–µ–∫—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

    Args:
        symbol: –°–∏–º–≤–æ–ª –ø–∞—Ä—ã

    Returns:
        str: –¢–µ–∫—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏
    """
    return f"""üîç <b>–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–∞—Ä—É {symbol.upper()}...</b>

–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Binance API:
‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–∞—Ä—ã
‚Ä¢ –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏–º–≤–æ–ª–µ
‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ç–æ—Ä–≥–æ–≤–ª–∏

<i>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ...</i>"""


def create_execution_loading_text() -> str:
    """
    –°–æ–∑–¥–∞—Ç—å —Ç–µ–∫—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

    Returns:
        str: –¢–µ–∫—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏
    """
    return """‚è≥ <b>–î–æ–±–∞–≤–ª—è–µ–º —Ç–æ—Ä–≥–æ–≤—É—é –ø–∞—Ä—É...</b>

–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
‚Ä¢ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
‚Ä¢ –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
‚Ä¢ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

<i>–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥...</i>"""


