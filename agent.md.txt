# AGENT.MD - Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ°Ñ€Ñ‚Ğ° Ğ²ÑĞµÑ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾-Ğ±Ğ¾Ñ‚Ğ°

> **Ğ’ĞµÑ€ÑĞ¸Ñ:** 2.0 Ğ”Ğ•Ğ¢ĞĞ›Ğ¬ĞĞĞ¯  
> **Ğ”Ğ°Ñ‚Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ:** 2025-07-30  
> **ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ´ĞµÑ‚Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ñ„Ğ°Ğ¹Ğ»Ğ° ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑĞ¼Ğ¸ Ğ¸ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ°Ğ¼Ğ¸ Ğ´Ğ»Ñ Ğ¸Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸ ĞºĞ¾Ğ´ĞµĞºÑĞ° Claude

## ğŸ“‹ Ğ¡ĞĞ”Ğ•Ğ Ğ–ĞĞĞ˜Ğ•

1. [ĞĞ±Ğ·Ğ¾Ñ€ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹](#Ğ¾Ğ±Ğ·Ğ¾Ñ€-Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹)
2. [Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹](#Ğ³Ğ»Ğ°Ğ²Ğ½Ñ‹Ğµ-Ñ„Ğ°Ğ¹Ğ»Ñ‹)
3. [Bot Layer - Telegram Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ](#bot-layer---telegram-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ)
4. [Data Layer - Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸](#data-layer---Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°-Ñ-Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸)
5. [Services Layer - Ğ‘Ğ¸Ğ·Ğ½ĞµÑ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°](#services-layer---Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°)
6. [Utils Layer - Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹](#utils-layer---ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹)
7. [Config Layer - ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ](#config-layer---ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ)
8. [Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹](#Ğ²ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ-Ñ„Ğ°Ğ¹Ğ»Ñ‹)
9. [Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑĞ¼](#Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹-Ğ¿Ğ¾Ğ¸ÑĞº-Ğ¿Ğ¾-Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑĞ¼)

---

## ğŸ—ï¸ ĞĞ‘Ğ—ĞĞ  ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ«

**Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°:**
```
crypto_bot/
â”œâ”€â”€ src/main.py                 # ğŸš€ Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ°
â”œâ”€â”€ .env/.env.example          # ğŸ”§ ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
â”œâ”€â”€ docker-compose.yml         # ğŸ³ Docker ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”œâ”€â”€ requirements.txt           # ğŸ“¦ Python Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
â”œâ”€â”€ scripts/                   # ğŸ“œ Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹
â””â”€â”€ src/                       # ğŸ’» Ğ˜ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´
    â”œâ”€â”€ bot/                   # ğŸ¤– Telegram Ğ±Ğ¾Ñ‚
    â”œâ”€â”€ config/                # âš™ï¸ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
    â”œâ”€â”€ data/                  # ğŸ—„ï¸ ĞœĞ¾Ğ´ĞµĞ»Ğ¸ Ğ¸ Ğ‘Ğ”
    â”œâ”€â”€ services/              # ğŸ”§ Ğ‘Ğ¸Ğ·Ğ½ĞµÑ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
    â””â”€â”€ utils/                 # ğŸ› ï¸ Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹
```

---

# ğŸ“ Ğ”Ğ•Ğ¢ĞĞ›Ğ¬ĞĞĞ¯ ĞšĞĞ Ğ¢Ğ Ğ’Ğ¡Ğ•Ğ¥ Ğ¤ĞĞ™Ğ›ĞĞ’

## ğŸš€ Ğ“Ğ›ĞĞ’ĞĞ«Ğ• Ğ¤ĞĞ™Ğ›Ğ«

### ğŸ“„ `src/main.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ - Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ¸ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

**Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ:**
- `bot: Optional[Bot]` - Ğ­ĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€ Telegram Ğ±Ğ¾Ñ‚Ğ°
- `dp: Optional[Dispatcher]` - Ğ”Ğ¸ÑĞ¿ĞµÑ‚Ñ‡ĞµÑ€ aiogram
- `stream_manager: Optional[StreamManager]` - ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ WebSocket Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²
- `telegram_sender: Optional[TelegramSender]` - ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ñ‰Ğ¸Ğº ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹
- `logger` - Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ğ»Ğ¾Ğ³Ğ³ĞµÑ€

**Ğ’ÑĞµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
async def create_bot() -> Bot
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€ Telegram Ğ±Ğ¾Ñ‚Ğ°"""

async def setup_dispatcher() -> Dispatcher
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ´Ğ¸ÑĞ¿ĞµÑ‚Ñ‡ĞµÑ€ Ğ¸ Ğ·Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑĞµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸"""

def validate_application_config() -> None
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµĞ³Ğ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ"""

def setup_signal_handlers() -> None
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ñ… ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ² (SIGINT, SIGTERM)"""

async def init_services() -> None
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑĞµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹: Ğ‘Ğ”, Redis, WebSocket, ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ"""

async def shutdown_services() -> None
    """ĞšĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ñ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²"""

async def check_connections() -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Ğ‘Ğ” Ğ¸ Redis"""

async def main() -> None
    """Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ"""
```

---

## ğŸ¤– BOT LAYER - TELEGRAM Ğ˜ĞĞ¢Ğ•Ğ Ğ¤Ğ•Ğ™Ğ¡

### ğŸ“‚ `src/bot/handlers/`

#### ğŸ“„ `src/bot/handlers/start_handler.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ /start Ğ¸ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
@start_router.message(CommandStart())
async def handle_start_command(message: Message, session: AsyncSession, state: FSMContext)
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ /start Ñ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

async def get_or_create_user(session: AsyncSession, telegram_user: Any) -> User
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ¸Ğ»Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

async def setup_default_pair_for_user(session: AsyncSession, user_id: int) -> bool
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½ÑƒÑ Ğ¿Ğ°Ñ€Ñƒ BTCUSDT Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

def create_welcome_message(display_name: str) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

def create_welcome_back_message(display_name: str) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ÑÑ‰ĞµĞ³Ğ¾ÑÑ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

def register_start_handlers(dp: Dispatcher) -> None
    """Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ /start Ğ² Ğ´Ğ¸ÑĞ¿ĞµÑ‚Ñ‡ĞµÑ€Ğµ"""
```

**Ğ Ğ¾ÑƒÑ‚ĞµÑ€:** `start_router = Router()`

---

#### ğŸ“„ `src/bot/handlers/remove_pair_handler.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ°Ñ€ Ğ¸Ğ· Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ

**FSM ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ:**
```python
class RemovePairStates(StatesGroup):
    selecting_pair = State()      # Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¿Ğ°Ñ€Ñ‹ Ğ´Ğ»Ñ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ
    confirming_removal = State()  # ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
@remove_pair_router.callback_query(F.data == "remove_pair")
async def handle_remove_pair_start(callback: CallbackQuery, session: AsyncSession, state: FSMContext)
    """ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ñ‹"""

@remove_pair_router.callback_query(RemovePairStates.selecting_pair)
async def handle_pair_selection_for_removal(callback: CallbackQuery, session: AsyncSession, state: FSMContext)
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ¿Ğ°Ñ€Ñ‹ Ğ´Ğ»Ñ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ"""

@remove_pair_router.callback_query(RemovePairStates.confirming_removal)
async def handle_removal_confirmation(callback: CallbackQuery, session: AsyncSession, state: FSMContext)
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€Ñ‹"""

async def get_user_pairs_for_removal(session: AsyncSession, user_id: int) -> List[UserPair]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ°Ñ€ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ´Ğ»Ñ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ"""

def create_pairs_removal_keyboard(user_pairs: List[UserPair]) -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ° Ğ¿Ğ°Ñ€Ñ‹ Ğ´Ğ»Ñ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ"""

def create_removal_confirmation_message(pair: Pair) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€Ñ‹"""

async def execute_pair_removal(session: AsyncSession, user_id: int, pair_id: int) -> bool
    """Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ñ‹ Ğ¸Ğ· Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

def register_remove_pair_handlers(dp: Dispatcher) -> None
    """Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€"""
```

**Ğ Ğ¾ÑƒÑ‚ĞµÑ€:** `remove_pair_router = Router()`

---

### ğŸ“‚ `src/bot/handlers/add_pair/` (ĞœĞ¾Ğ´ÑƒĞ»ÑŒ)

#### ğŸ“„ `src/bot/handlers/add_pair/add_pair_handler.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ FSM Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ°Ñ€

**FSM ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ:**
```python
class AddPairStates(StatesGroup):
    waiting_for_symbol = State()  # ĞĞ¶Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ²Ğ²Ğ¾Ğ´Ğ° ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ° Ğ¿Ğ°Ñ€Ñ‹
    confirming_pair = State()     # ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€Ñ‹
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
@add_pair_router.callback_query(F.data == "add_pair")
async def handle_add_pair_start(callback: CallbackQuery, state: FSMContext)
    """ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ñ‹"""

@add_pair_router.message(AddPairStates.waiting_for_symbol)
async def handle_pair_symbol_input(message: Message, session: AsyncSession, state: FSMContext)
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ²Ğ²Ğ¾Ğ´ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ° Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼"""

@add_pair_router.callback_query(AddPairStates.confirming_pair, F.data == "confirm_add_pair")
async def handle_pair_confirmation(callback: CallbackQuery, session: AsyncSession, state: FSMContext)
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€Ñ‹"""

@add_pair_router.callback_query(F.data == "cancel_add_pair")
async def handle_cancel_add_pair(callback: CallbackQuery, state: FSMContext)
    """ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€Ñ‹"""

def register_add_pair_handlers(dp: Dispatcher) -> None
    """Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€ Ğ² Ğ´Ğ¸ÑĞ¿ĞµÑ‚Ñ‡ĞµÑ€Ğµ"""
```

**Ğ Ğ¾ÑƒÑ‚ĞµÑ€:** `add_pair_router = Router()`

#### ğŸ“„ `src/bot/handlers/add_pair/add_pair_logic.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
async def process_symbol_input(session: AsyncSession, symbol: str) -> Dict[str, Any]
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²Ğ²ĞµĞ´ĞµĞ½Ğ½Ñ‹Ğ¹ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ñ‹"""

async def validate_pair_on_binance(symbol: str) -> Dict[str, Any]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ñ‹ Ğ½Ğ° Binance Ñ‡ĞµÑ€ĞµĞ· API"""

async def execute_add_pair(session: AsyncSession, user_id: int, symbol: str) -> Dict[str, Any]
    """Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ñ‹ Ğ² Ğ‘Ğ” Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

async def setup_pair_timeframes(session: AsyncSession, user_id: int, pair_id: int) -> Dict[str, bool]
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ñ‹Ğµ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ñ‹ Ğ´Ğ»Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ñ‹"""

async def fetch_initial_candle_data(symbol: str) -> bool
    """Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ñ‹"""
```

#### ğŸ“„ `src/bot/handlers/add_pair/add_pair_formatters.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def create_add_pair_instruction() -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¾ Ğ²Ğ²Ğ¾Ğ´Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ° Ğ¿Ğ°Ñ€Ñ‹"""

def create_pair_confirmation_text(symbol: str, pair_info: Dict[str, Any]) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¾ Ğ¿Ğ°Ñ€Ğµ"""

def create_pair_error_text(error_type: str, symbol: str = None) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ¾ÑˆĞ¸Ğ±ĞºĞµ Ğ¿Ñ€Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ Ğ¿Ğ°Ñ€Ñ‹"""

def create_pair_added_text(symbol: str, timeframes_count: int) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ¼ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸ Ğ¿Ğ°Ñ€Ñ‹"""

def create_add_error_text(error_message: str) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ¾Ğ±Ñ‰ĞµĞ¹ Ğ¾ÑˆĞ¸Ğ±ĞºĞµ Ğ¿Ñ€Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğ¸"""

def format_pair_info_display(pair_info: Dict[str, Any]) -> str
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿Ğ°Ñ€Ğµ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ"""
```

---

### ğŸ“‚ `src/bot/handlers/my_pairs/` (ĞœĞ¾Ğ´ÑƒĞ»ÑŒ)

#### ğŸ“„ `src/bot/handlers/my_pairs/my_pairs_handler.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ FSM Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ¼Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

**FSM ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ:**
```python
class MyPairsStates(StatesGroup):
    viewing_pairs = State()        # ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ ÑĞ¿Ğ¸ÑĞºĞ° Ğ¿Ğ°Ñ€
    managing_timeframes = State()  # Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°Ğ¼Ğ¸
    viewing_rsi = State()          # ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ RSI Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
@my_pairs_router.callback_query(F.data == "my_pairs")
async def handle_my_pairs_start(callback: CallbackQuery, session: AsyncSession, state: FSMContext)
    """ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ°Ñ€ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

@my_pairs_router.callback_query(MyPairsStates.viewing_pairs)
async def handle_pair_management(callback: CallbackQuery, session: AsyncSession, state: FSMContext)
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ğ¿Ğ°Ñ€Ñ‹ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ"""

@my_pairs_router.callback_query(MyPairsStates.managing_timeframes)
async def handle_timeframe_toggle(callback: CallbackQuery, session: AsyncSession, state: FSMContext)
    """ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ° Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ñ‹"""

@my_pairs_router.callback_query(MyPairsStates.viewing_rsi)
async def handle_rsi_view(callback: CallbackQuery, session: AsyncSession, state: FSMContext)
    """ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ RSI Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ñ‹"""

async def get_user_pairs_with_stats(session: AsyncSession, user_id: int) -> List[Dict[str, Any]]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ÑĞ¾ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¾Ğ¹ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""

def register_my_pairs_handlers(dp: Dispatcher) -> None
    """Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼Ğ¸"""
```

**Ğ Ğ¾ÑƒÑ‚ĞµÑ€:** `my_pairs_router = Router()`

#### ğŸ“„ `src/bot/handlers/my_pairs/my_pairs_formatters.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼Ğ¸

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def create_no_pairs_message() -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ³Ğ´Ğ° Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ½ĞµÑ‚ Ğ¿Ğ°Ñ€"""

def create_pairs_list_message(user_pairs: List[Dict[str, Any]]) -> str
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ ÑĞ¾ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ Ğ¿Ğ°Ñ€ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

def create_pair_management_message(pair: Pair, user_pair: UserPair) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ğ¾Ğ¹"""

def create_rsi_display_message(symbol: str, rsi_data: Dict[str, float]) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ĞµĞ¼ RSI Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹"""

def create_rsi_error_message(symbol: str, error: str) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ¾ÑˆĞ¸Ğ±ĞºĞµ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ RSI"""

def format_timeframes_status(timeframes: Dict[str, bool]) -> str
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ‹Ñ…/Ğ²Ñ‹ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ‹Ñ… Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ¾Ğ²"""

def format_pair_statistics(signals_count: int, last_signal: Optional[datetime]) -> str
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¿Ğ¾ Ğ¿Ğ°Ñ€Ğµ (ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹, Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ ÑĞ¸Ğ³Ğ½Ğ°Ğ»)"""
```

#### ğŸ“„ `src/bot/handlers/my_pairs/my_pairs_keyboards.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹ Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼Ğ¸

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def create_no_pairs_keyboard() -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ ĞºĞ¾Ğ³Ğ´Ğ° Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ½ĞµÑ‚ Ğ¿Ğ°Ñ€"""

def create_pairs_list_keyboard(user_pairs: List[Dict[str, Any]]) -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ ÑĞ¾ ÑĞ¿Ğ¸ÑĞºĞ¾Ğ¼ Ğ¿Ğ°Ñ€ Ğ´Ğ»Ñ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ°"""

def create_pair_management_keyboard(pair_id: int, user_pair: UserPair) -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ğ¾Ğ¹"""

def create_timeframes_keyboard(pair_id: int, timeframes: Dict[str, bool]) -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ Ğ¿ĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ¾Ğ²"""

def create_rsi_display_keyboard(pair_id: int) -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ° RSI Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹"""

def get_back_to_management_keyboard(pair_id: int) -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚Ğ° Ğº ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€Ğ¾Ğ¹"""
```

#### ğŸ“„ `src/bot/handlers/my_pairs/my_pairs_logic.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼Ğ¸

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
async def calculate_rsi_for_pair(session: AsyncSession, symbol: str, timeframes: List[str]) -> Dict[str, float]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ RSI Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ñ‹ Ğ¿Ğ¾ Ğ²ÑĞµĞ¼ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°Ğ¼"""

async def toggle_timeframe(session: AsyncSession, user_id: int, pair_id: int, timeframe: str) -> bool
    """ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ° (Ğ²ĞºĞ»ÑÑ‡ĞµĞ½/Ğ²Ñ‹ĞºĞ»ÑÑ‡ĞµĞ½)"""

async def get_pair_signal_statistics(session: AsyncSession, user_id: int, pair_id: int) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ² Ğ¿Ğ¾ Ğ¿Ğ°Ñ€Ğµ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

async def update_timeframes_config(session: AsyncSession, user_id: int, pair_id: int, new_config: Dict[str, bool]) -> bool
    """ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ¾Ğ² Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ñ‹"""

async def validate_timeframe_change(current_config: Dict[str, bool], timeframe: str, new_state: bool) -> bool
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ° (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ Ğ¾Ğ´Ğ¸Ğ½ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½)"""
```

---

### ğŸ“‚ `src/bot/keyboards/`

#### ğŸ“„ `src/bot/keyboards/main_menu_kb.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ’ÑĞµ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñ‹ Ğ´Ğ»Ñ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ğ±Ğ¾Ñ‚Ñƒ

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def get_main_menu_keyboard() -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğ¼Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑĞ¼Ğ¸"""

def get_back_to_menu_keyboard() -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ Ñ ĞºĞ½Ğ¾Ğ¿ĞºĞ¾Ğ¹ Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚Ğ° Ğ² Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ"""

def get_confirmation_keyboard(action: str, item_id: str = None) -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ (Ğ”Ğ°/ĞĞµÑ‚)"""

def get_loading_keyboard() -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ Ñ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ¼ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸"""

def get_menu_with_notification_button(show_notification_controls: bool = True) -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ¾Ğµ Ğ¼ĞµĞ½Ñ Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸ĞµĞ¼ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸ÑĞ¼Ğ¸"""

def get_navigation_keyboard(back_callback: str = "main_menu", additional_buttons: list = None) -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑƒĞ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½ÑƒÑ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½ÑƒÑ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ"""

def get_error_keyboard() -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ Ğ´Ğ»Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¾Ğ± Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ…"""

def get_settings_keyboard() -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞº Ğ±Ğ¾Ñ‚Ğ°"""

def get_help_keyboard() -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ° Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ¸"""
```

---

### ğŸ“‚ `src/bot/middlewares/`

#### ğŸ“„ `src/bot/middlewares/database_mw.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Middleware Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ ÑĞµÑÑĞ¸Ğ¹ Ğ‘Ğ”

**ĞšĞ»Ğ°ÑÑÑ‹ Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
class DatabaseMiddleware(BaseMiddleware):
    """Middleware Ğ´Ğ»Ñ Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ÑĞµÑÑĞ¸Ğ¸ Ğ‘Ğ” Ğ² Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸"""

    async def __call__(
        self,
        handler: Callable[[TelegramObject, Dict[str, Any]], Awaitable[Any]],
        event: TelegramObject,
        data: Dict[str, Any]
    ) -> Any:
        """ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´ middleware - ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑÑĞ¸ĞµĞ¹ Ğ‘Ğ”"""

    async def _handle_database_error(
        self,
        event: TelegramObject,
        error: Exception,
        user_id: Optional[int] = None
    ) -> None:
        """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

    def _extract_user_id(self, event: TelegramObject) -> Optional[int]
        """Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ ID Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¸Ğ· ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ"""

    def _create_error_message(self, error: Exception) -> str
        """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ¾ÑˆĞ¸Ğ±ĞºĞµ"""
```

---

## ğŸ—„ï¸ DATA LAYER - Ğ ĞĞ‘ĞĞ¢Ğ Ğ¡ Ğ”ĞĞĞĞ«ĞœĞ˜

### ğŸ“‚ `src/data/models/`

#### ğŸ“„ `src/data/models/base_model.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†

**ĞšĞ»Ğ°ÑÑÑ‹:**
```python
class Base(DeclarativeBase):
    """Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… SQLAlchemy Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹"""
    
    # ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¿Ğ¾Ğ»Ñ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
    created_at: Mapped[datetime]  # Ğ’Ñ€ĞµĞ¼Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ
    updated_at: Mapped[datetime]  # Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ
```

#### ğŸ“„ `src/data/models/user_model.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Telegram

**ĞœĞ¾Ğ´ĞµĞ»ÑŒ:**
```python
class User(Base):
    """ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Telegram"""
    
    # ĞŸĞ¾Ğ»Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹
    id: BigInteger                      # Telegram user ID (PK)
    username: String(50)                # @username
    first_name: String(100)             # Ğ˜Ğ¼Ñ
    last_name: String(100)              # Ğ¤Ğ°Ğ¼Ğ¸Ğ»Ğ¸Ñ  
    language_code: String(10)           # ĞšĞ¾Ğ´ ÑĞ·Ñ‹ĞºĞ°
    notifications_enabled: Boolean      # Ğ’ĞºĞ»ÑÑ‡ĞµĞ½Ñ‹ Ğ»Ğ¸ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
    is_active: Boolean                  # ĞĞºÑ‚Ğ¸Ğ²ĞµĞ½ Ğ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ
    is_blocked: Boolean                 # Ğ—Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ»Ğ¸ Ğ±Ğ¾Ñ‚
    total_signals_received: Integer     # Ğ’ÑĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¾ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²
    
    # Ğ¡Ğ²ÑĞ·Ğ¸
    user_pairs: relationship("UserPair")
    signal_history: relationship("SignalHistory")
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
@property
def display_name(self) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµĞ¼Ğ¾Ğµ Ğ¸Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

def update_from_telegram(self, telegram_user) -> None
    """ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¸Ğ· Telegram"""

def increment_signals_count(self) -> None
    """Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ ÑÑ‡ĞµÑ‚Ñ‡Ğ¸Ğº Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""

def toggle_notifications(self) -> bool
    """ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹"""

def mark_as_blocked(self) -> None
    """ĞÑ‚Ğ¼ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ĞºĞ°Ğº Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ²ÑˆĞµĞ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ°"""

def mark_as_active(self) -> None
    """ĞÑ‚Ğ¼ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ĞºĞ°Ğº Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾"""

def to_dict(self) -> Dict[str, Any]
    """ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ² ÑĞ»Ğ¾Ğ²Ğ°Ñ€ÑŒ"""
```

#### ğŸ“„ `src/data/models/pair_model.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞœĞ¾Ğ´ĞµĞ»ÑŒ ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ²Ğ°Ğ»ÑÑ‚Ğ½Ğ¾Ğ¹ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ñ‹

**ĞœĞ¾Ğ´ĞµĞ»ÑŒ:**
```python
class Pair(Base):
    """ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ñ‹"""
    
    # ĞŸĞ¾Ğ»Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹
    id: Integer                    # ID Ğ¿Ğ°Ñ€Ñ‹ (PK)
    symbol: String(20)             # Ğ¡Ğ¸Ğ¼Ğ²Ğ¾Ğ» Ğ¿Ğ°Ñ€Ñ‹ (BTCUSDT)
    base_asset: String(10)         # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ²Ğ°Ğ»ÑÑ‚Ğ° (BTC)
    quote_asset: String(10)        # ĞšĞ¾Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼Ğ°Ñ Ğ²Ğ°Ğ»ÑÑ‚Ğ° (USDT)
    is_active: Boolean             # ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ° Ğ»Ğ¸ Ğ¿Ğ°Ñ€Ğ°
    is_tracked: Boolean            # ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ğ»Ğ¸ WebSocket
    price_precision: Integer       # Ğ¢Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ Ñ†ĞµĞ½Ñ‹
    quantity_precision: Integer    # Ğ¢Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ°
    users_count: Integer           # ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
    signals_count: Integer         # ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²
    last_price: Numeric(18,8)      # ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ñ†ĞµĞ½Ğ°
    
    # Ğ¡Ğ²ÑĞ·Ğ¸
    user_pairs: relationship("UserPair")
    candles: relationship("Candle")
    signal_history: relationship("SignalHistory")
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
@property
def display_name(self) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµĞ¼Ğ¾Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ñ‹"""

def increment_users_count(self) -> None
    """Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ ÑÑ‡ĞµÑ‚Ñ‡Ğ¸Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹"""

def decrement_users_count(self) -> None
    """Ğ£Ğ¼ĞµĞ½ÑŒÑˆĞ¸Ñ‚ÑŒ ÑÑ‡ĞµÑ‚Ñ‡Ğ¸Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹"""

def increment_signals_count(self) -> None
    """Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ ÑÑ‡ĞµÑ‚Ñ‡Ğ¸Ğº ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""

def update_last_price(self, price: Decimal) -> None
    """ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ñ†ĞµĞ½Ñƒ"""

def activate(self) -> None
    """ĞĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ñƒ"""

def deactivate(self) -> None
    """Ğ”ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ñƒ"""

def start_tracking(self) -> None
    """ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· WebSocket"""

def stop_tracking(self) -> None
    """ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ"""

@classmethod
async def from_symbol(cls, session: AsyncSession, symbol: str) -> "Pair"
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ñƒ Ğ¸Ğ· ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ° Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸ĞµĞ¹"""

def to_dict(self) -> Dict[str, Any]
    """ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ Ğ² ÑĞ»Ğ¾Ğ²Ğ°Ñ€ÑŒ"""
```

#### ğŸ“„ `src/data/models/user_pair_model.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¡Ğ²ÑĞ·ÑŒ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¼ Ğ¸ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ğ¾Ğ¹

**ĞœĞ¾Ğ´ĞµĞ»ÑŒ:**
```python
class UserPair(Base):
    """ĞœĞ¾Ğ´ĞµĞ»ÑŒ ÑĞ²ÑĞ·Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ-Ğ¿Ğ°Ñ€Ğ°"""
    
    # Ğ¡Ğ¾ÑÑ‚Ğ°Ğ²Ğ½Ğ¾Ğ¹ Ğ¿ĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ĞºĞ»ÑÑ‡
    user_id: BigInteger              # ID Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (PK)
    pair_id: Integer                 # ID Ğ¿Ğ°Ñ€Ñ‹ (PK)
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
    timeframes: JSON                 # {timeframe: enabled}
    custom_settings: JSON            # Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
    signals_received: Integer        # ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²
    
    # Ğ¡Ğ²ÑĞ·Ğ¸
    user: relationship("User")
    pair: relationship("Pair")
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self, user_id: int, pair_id: int, timeframes: Optional[Dict[str, bool]] = None)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ñ‹Ğ¼Ğ¸ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°Ğ¼Ğ¸"""

def get_enabled_timeframes(self) -> List[str]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ‹Ñ… Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ¾Ğ²"""

def enable_timeframe(self, timeframe: str) -> bool
    """Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼"""

def disable_timeframe(self, timeframe: str) -> bool
    """Ğ’Ñ‹ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼ (Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¾Ğ¹ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼Ğ°)"""

def is_timeframe_enabled(self, timeframe: str) -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½ Ğ»Ğ¸ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼"""

def update_timeframes(self, new_timeframes: Dict[str, bool]) -> bool
    """ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ¾Ğ²"""

def increment_signals_count(self) -> None
    """Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ ÑÑ‡ĞµÑ‚Ñ‡Ğ¸Ğº ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""

@classmethod
async def get_users_for_timeframe(cls, session: AsyncSession, pair_id: int, timeframe: str) -> List["UserPair"]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ñ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ½Ñ‹Ğ¼ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ¾Ğ¼"""

@classmethod
async def create_user_pair(cls, session: AsyncSession, user_id: int, pair_id: int, timeframes: Optional[Dict[str, bool]] = None) -> "UserPair"
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ²ÑĞ·ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ-Ğ¿Ğ°Ñ€Ğ°"""

def to_dict(self, include_pair_info: bool = False) -> Dict[str, Any]
    """ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² ÑĞ»Ğ¾Ğ²Ğ°Ñ€ÑŒ"""
```

#### ğŸ“„ `src/data/models/candle_model.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞœĞ¾Ğ´ĞµĞ»ÑŒ ÑĞ²ĞµÑ‡Ğ¸ (OHLCV Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ)

**ĞœĞ¾Ğ´ĞµĞ»ÑŒ:**
```python
class Candle(Base):
    """ĞœĞ¾Ğ´ĞµĞ»ÑŒ ÑĞ²ĞµÑ‡Ğ¸ Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ OHLCV Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""
    
    # ĞŸĞ¾Ğ»Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹
    id: Integer                      # ID ÑĞ²ĞµÑ‡Ğ¸ (PK)
    pair_id: Integer                 # ID Ğ¿Ğ°Ñ€Ñ‹ (FK)
    timeframe: String(5)             # Ğ¢Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼
    open_time: BigInteger            # Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ (timestamp ms)
    close_time: BigInteger           # Ğ’Ñ€ĞµĞ¼Ñ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ (timestamp ms)
    open_price: Numeric(18,8)        # Ğ¦ĞµĞ½Ğ° Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ
    high_price: Numeric(18,8)        # ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ†ĞµĞ½Ğ°
    low_price: Numeric(18,8)         # ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ†ĞµĞ½Ğ°
    close_price: Numeric(18,8)       # Ğ¦ĞµĞ½Ğ° Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ
    volume: Numeric(18,8)            # ĞĞ±ÑŠĞµĞ¼ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²
    quote_volume: Numeric(18,8)      # ĞĞ±ÑŠĞµĞ¼ Ğ² ĞºĞ¾Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾Ğ¹ Ğ²Ğ°Ğ»ÑÑ‚Ğµ
    trades_count: Integer            # ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ´ĞµĞ»Ğ¾Ğº
    is_closed: Boolean               # Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ° Ğ»Ğ¸ ÑĞ²ĞµÑ‡Ğ°
    
    # Ğ¡Ğ²ÑĞ·Ğ¸
    pair: relationship("Pair")
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
@property
def open_datetime(self) -> datetime
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ ĞºĞ°Ğº datetime"""

@property
def close_datetime(self) -> datetime
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼Ñ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ ĞºĞ°Ğº datetime"""

@property
def price_change(self) -> Decimal
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ñ†ĞµĞ½Ñ‹"""

@property
def price_change_percent(self) -> float
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ñ†ĞµĞ½Ñ‹ Ğ² Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ°Ñ…"""

def update_from_websocket(self, kline_data: Dict[str, Any]) -> None
    """ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑĞ²ĞµÑ‡Ñƒ Ğ¸Ğ· WebSocket Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

def close_candle(self) -> None
    """Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ ÑĞ²ĞµÑ‡Ñƒ"""

@classmethod
async def create_from_binance_kline(cls, session: AsyncSession, pair_id: int, kline_data: Dict[str, Any]) -> "Candle"
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ²ĞµÑ‡Ñƒ Ğ¸Ğ· Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Binance kline"""

@classmethod
async def get_latest_candles(cls, session: AsyncSession, pair_id: int, timeframe: str, limit: int = 100) -> List["Candle"]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ ÑĞ²ĞµÑ‡Ğ¸"""

def to_dict(self) -> Dict[str, Any]
    """ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² ÑĞ»Ğ¾Ğ²Ğ°Ñ€ÑŒ"""

def to_ohlcv_tuple(self) -> Tuple[float, float, float, float, float]
    """ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² OHLCV ĞºĞ¾Ñ€Ñ‚ĞµĞ¶"""
```

#### ğŸ“„ `src/data/models/signal_history_model.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²

**ĞœĞ¾Ğ´ĞµĞ»ÑŒ:**
```python
class SignalHistory(Base):
    """ĞœĞ¾Ğ´ĞµĞ»ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""
    
    # ĞŸĞ¾Ğ»Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹
    id: Integer                    # ID Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ (PK)
    user_id: BigInteger            # ID Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (FK)
    pair_id: Integer               # ID Ğ¿Ğ°Ñ€Ñ‹ (FK)
    timeframe: String(5)           # Ğ¢Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼
    signal_type: String(50)        # Ğ¢Ğ¸Ğ¿ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°
    signal_value: Numeric(10,4)    # Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°
    price: Numeric(18,8)           # Ğ¦ĞµĞ½Ğ° Ğ½Ğ° Ğ¼Ğ¾Ğ¼ĞµĞ½Ñ‚ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°
    additional_data: JSON          # Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
    sent_at: DateTime              # Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸
    
    # Ğ¡Ğ²ÑĞ·Ğ¸
    user: relationship("User")
    pair: relationship("Pair")
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
@property
def signal_display_name(self) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµĞ¼Ğ¾Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°"""

@classmethod
async def create_signal_record(
    cls, session: AsyncSession, user_id: int, pair_id: int, 
    timeframe: str, signal_type: str, signal_value: Optional[float],
    price: float, additional_data: Optional[Dict[str, Any]] = None
) -> "SignalHistory"
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ¾ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğµ"""

@classmethod
async def get_user_recent_signals(cls, session: AsyncSession, user_id: int, limit: int = 50) -> List["SignalHistory"]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

@classmethod
async def get_last_signal_time(cls, session: AsyncSession, user_id: int, pair_id: int, timeframe: str, signal_type: str) -> Optional[datetime]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼Ñ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ³Ğ¾ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ° ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ³Ğ¾ Ñ‚Ğ¸Ğ¿Ğ°"""

@classmethod
async def count_user_signals(cls, session: AsyncSession, user_id: int, since: Optional[datetime] = None) -> int
    """ĞŸĞ¾Ğ´ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ² Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

def to_dict(self) -> Dict[str, Any]
    """ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² ÑĞ»Ğ¾Ğ²Ğ°Ñ€ÑŒ"""
```

---

### ğŸ“‚ `src/data/repositories/`

#### ğŸ“„ `src/data/repositories/base_repository.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ Ñ CRUD Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸

**ĞšĞ»Ğ°ÑÑ:**
```python
class BaseRepository[ModelType]:
    """Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹"""
    
    def __init__(self, model: Type[ModelType])
        """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ Ñ‚Ğ¸Ğ¿Ğ¾Ğ¼ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
async def create(self, session: AsyncSession, **kwargs) -> ModelType
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²ÑƒÑ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ"""

async def get_by_id(self, session: AsyncSession, record_id: Any, load_relations: bool = False) -> Optional[ModelType]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ¿Ğ¾ ID"""

async def get_by_field(self, session: AsyncSession, field_name: str, field_value: Any, load_relations: bool = False) -> Optional[ModelType]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ¿Ğ¾ Ğ¿Ğ¾Ğ»Ñ"""

async def get_all(self, session: AsyncSession, limit: Optional[int] = None, offset: Optional[int] = None, load_relations: bool = False) -> List[ModelType]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸"""

async def update(self, session: AsyncSession, record_id: Any, **kwargs) -> Optional[ModelType]
    """ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ¿Ğ¾ ID"""

async def delete(self, session: AsyncSession, record_id: Any) -> bool
    """Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ¸ÑÑŒ Ğ¿Ğ¾ ID"""

async def count(self, session: AsyncSession, filters: Optional[Dict[str, Any]] = None) -> int
    """ĞŸĞ¾Ğ´ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹"""

async def exists(self, session: AsyncSession, **kwargs) -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸"""

async def search(self, session: AsyncSession, search_term: str, search_fields: List[str], limit: int = 10) -> List[ModelType]
    """ĞŸĞ¾Ğ¸ÑĞº Ğ·Ğ°Ğ¿Ğ¸ÑĞµĞ¹ Ğ¿Ğ¾ Ğ¿Ğ¾Ğ»ÑĞ¼"""

async def get_paginated(self, session: AsyncSession, page: int, page_size: int, filters: Optional[Dict[str, Any]] = None) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ñ Ğ¿Ğ°Ğ³Ğ¸Ğ½Ğ°Ñ†Ğ¸ĞµĞ¹"""

def _add_relationship_loading(self, stmt) -> Any
    """Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºÑƒ ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾Ğ±ÑŠĞµĞºÑ‚Ğ¾Ğ²"""

def _apply_filters(self, stmt, filters: Dict[str, Any]) -> Any
    """ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹ Ğº Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ"""
```

#### ğŸ“„ `src/data/repositories/user_repository.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸

**ĞšĞ»Ğ°ÑÑ:**
```python
class UserRepository(BaseRepository[User]):
    """Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
async def create_user_from_telegram(self, session: AsyncSession, telegram_user: Any) -> User
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¸Ğ· Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Telegram"""

async def get_by_telegram_id(self, session: AsyncSession, telegram_id: int) -> Optional[User]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¿Ğ¾ Telegram ID"""

async def update_user_settings(self, session: AsyncSession, user_id: int, **settings) -> Optional[User]
    """ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

async def toggle_notifications(self, session: AsyncSession, user_id: int) -> bool
    """ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

async def mark_user_blocked(self, session: AsyncSession, user_id: int) -> bool
    """ĞÑ‚Ğ¼ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ĞºĞ°Ğº Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ²ÑˆĞµĞ³Ğ¾ Ğ±Ğ¾Ñ‚Ğ°"""

async def mark_user_active(self, session: AsyncSession, user_id: int) -> bool
    """ĞÑ‚Ğ¼ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ĞºĞ°Ğº Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾"""

async def get_active_users(self, session: AsyncSession, with_notifications: bool = True) -> List[User]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹"""

async def get_users_with_pairs(self, session: AsyncSession, symbol: Optional[str] = None) -> List[User]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ñ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ¼Ğ¸"""

async def get_user_statistics(self, session: AsyncSession, user_id: int) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

async def increment_user_signals_count(self, session: AsyncSession, user_id: int) -> bool
    """Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ ÑÑ‡ĞµÑ‚Ñ‡Ğ¸Ğº ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ² Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

async def get_users_summary(self, session: AsyncSession) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ²Ğ¾Ğ´Ğ½ÑƒÑ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹"""
```

#### ğŸ“„ `src/data/repositories/pair_repository.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ğ¼Ğ¸ Ğ¿Ğ°Ñ€Ğ°Ğ¼Ğ¸

**ĞšĞ»Ğ°ÑÑ:**
```python
class PairRepository(BaseRepository[Pair]):
    """Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ°Ñ€"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
async def create_pair_from_symbol(self, session: AsyncSession, symbol: str, price_precision: Optional[int] = None, quantity_precision: Optional[int] = None, is_active: bool = True) -> Pair
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²ÑƒÑ Ğ¿Ğ°Ñ€Ñƒ Ğ¸Ğ· ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°"""

async def get_by_symbol(self, session: AsyncSession, symbol: str) -> Optional[Pair]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ñƒ Ğ¿Ğ¾ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñƒ"""

async def get_or_create_pair(self, session: AsyncSession, symbol: str) -> Tuple[Pair, bool]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ÑƒÑ Ğ¸Ğ»Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²ÑƒÑ Ğ¿Ğ°Ñ€Ñƒ"""

async def add_user_to_pair(self, session: AsyncSession, user_id: int, symbol: str, timeframes: Optional[Dict[str, bool]] = None) -> UserPair
    """Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğº Ğ¿Ğ°Ñ€Ğµ"""

async def remove_user_from_pair(self, session: AsyncSession, user_id: int, pair_id: int) -> bool
    """Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¾Ñ‚ Ğ¿Ğ°Ñ€Ñ‹"""

async def get_user_pairs(self, session: AsyncSession, user_id: int, load_pair_info: bool = True) -> List[UserPair]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

async def get_tracked_pairs(self, session: AsyncSession) -> List[Pair]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ğ¿Ğ°Ñ€Ñ‹ Ğ´Ğ»Ñ WebSocket"""

async def get_popular_pairs(self, session: AsyncSession, limit: int = 10) -> List[Pair]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ñ‹"""

async def search_pairs_by_base_asset(self, session: AsyncSession, base_asset: str, limit: int = 10) -> List[Pair]
    """ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ°Ñ€Ñ‹ Ğ¿Ğ¾ Ğ±Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğ¹ Ğ²Ğ°Ğ»ÑÑ‚Ğµ"""

async def increment_users_count(self, session: AsyncSession, pair_id: int) -> bool
    """Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ ÑÑ‡ĞµÑ‚Ñ‡Ğ¸Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ¿Ğ°Ñ€Ñ‹"""

async def decrement_users_count(self, session: AsyncSession, pair_id: int) -> bool
    """Ğ£Ğ¼ĞµĞ½ÑŒÑˆĞ¸Ñ‚ÑŒ ÑÑ‡ĞµÑ‚Ñ‡Ğ¸Ğº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ¿Ğ°Ñ€Ñ‹"""

async def increment_signals_count(self, session: AsyncSession, pair_id: int) -> bool
    """Ğ£Ğ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ ÑÑ‡ĞµÑ‚Ñ‡Ğ¸Ğº ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ² Ğ¿Ğ°Ñ€Ñ‹"""

async def update_last_price(self, session: AsyncSession, pair_id: int, price: Decimal) -> bool
    """ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ Ñ†ĞµĞ½Ñƒ Ğ¿Ğ°Ñ€Ñ‹"""

async def get_pairs_summary(self, session: AsyncSession) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ²Ğ¾Ğ´Ğ½ÑƒÑ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¿Ğ°Ñ€"""

async def cleanup_unused_pairs(self, session: AsyncSession, dry_run: bool = True) -> Dict[str, Any]
    """ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Ğ½ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ñ… Ğ¿Ğ°Ñ€"""
```

---

### ğŸ“‚ `src/data/`

#### ğŸ“„ `src/data/database.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸ĞµĞ¼ Ğº PostgreSQL

**Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ:**
```python
engine: Optional[AsyncEngine] = None    # SQLAlchemy Ğ´Ğ²Ğ¸Ğ¶Ğ¾Ğº
SessionLocal: Optional[AsyncSessionmaker] = None  # Ğ¤Ğ°Ğ±Ñ€Ğ¸ĞºĞ° ÑĞµÑÑĞ¸Ğ¹
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
async def init_database() -> None
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

async def close_database() -> None
    """Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

async def check_database_connection() -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

async def get_session() -> AsyncContextManager[AsyncSession]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞµÑÑĞ¸Ñ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ½Ñ‹Ğ¹ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€)"""

async def create_tables() -> None
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ²ÑĞµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ² Ğ±Ğ°Ğ·Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

async def drop_tables() -> None
    """Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ¸Ğ· Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

async def reset_database() -> None
    """Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ½Ğ¾Ğ²Ğ¾)"""

def get_engine() -> Optional[AsyncEngine]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ´Ğ²Ğ¸Ğ¶Ğ¾Ğº Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

async def execute_raw_query(query: str, params: Optional[Dict[str, Any]] = None) -> Any
    """Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ ÑÑ‹Ñ€Ğ¾Ğ¹ SQL Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ"""
```

#### ğŸ“„ `src/data/redis_client.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸ĞµĞ¼ Ğº Redis

**Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ:**
```python
redis_client: Optional[Redis] = None    # ĞšĞ»Ğ¸ĞµĞ½Ñ‚ Redis
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
async def init_redis() -> None
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Redis"""

async def close_redis() -> None
    """Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Redis"""

async def check_redis_connection() -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Redis"""

async def get_redis() -> Optional[Redis]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€ Redis ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°"""

async def flush_redis() -> bool
    """ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² Redis"""

async def get_redis_info() -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Redis ÑĞµÑ€Ğ²ĞµÑ€Ğµ"""

async def ping_redis() -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ Redis Ñ‡ĞµÑ€ĞµĞ· ping"""
```

---

## ğŸ”§ SERVICES LAYER - Ğ‘Ğ˜Ğ—ĞĞ•Ğ¡ Ğ›ĞĞ“Ğ˜ĞšĞ

### ğŸ“‚ `src/services/websocket/`

#### ğŸ“„ `src/services/websocket/binance_websocket.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** WebSocket ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Binance API

**ĞŸĞµÑ€ĞµÑ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ:**
```python
class ConnectionState(Enum):
    """Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ WebSocket ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ"""
    DISCONNECTED = "disconnected"
    CONNECTING = "connecting" 
    CONNECTED = "connected"
    RECONNECTING = "reconnecting"
    CLOSED = "closed"
```

**ĞšĞ»Ğ°ÑÑ:**
```python
class BinanceWebSocketClient(LoggerMixin):
    """WebSocket ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Binance"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self, message_handler: Optional[Callable] = None, error_handler: Optional[Callable] = None)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°"""

async def connect(self) -> bool
    """ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğº WebSocket ÑĞµÑ€Ğ²ĞµÑ€Ñƒ"""

async def disconnect(self) -> None
    """ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğ¾Ñ‚ WebSocket ÑĞµÑ€Ğ²ĞµÑ€Ğ°"""

async def subscribe_to_streams(self, streams: List[str]) -> bool
    """ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒÑÑ Ğ½Ğ° Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

async def unsubscribe_from_streams(self, streams: List[str]) -> bool
    """ĞÑ‚Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒÑÑ Ğ¾Ñ‚ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ² Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

async def send_ping(self) -> bool
    """ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ping ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ"""

async def handle_message(self, message: str) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ²Ñ…Ğ¾Ğ´ÑÑ‰ĞµĞµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ"""

async def handle_error(self, error: Exception) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ"""

async def reconnect(self) -> bool
    """ĞŸĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒÑÑ Ğ¿Ñ€Ğ¸ Ñ€Ğ°Ğ·Ñ€Ñ‹Ğ²Ğµ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ñ"""

async def start_ping_task(self) -> None
    """Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ ping"""

async def stop_ping_task(self) -> None
    """ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ ping"""

def get_connection_state(self) -> ConnectionState
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰ĞµĞµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ"""

def is_connected(self) -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½ Ğ»Ğ¸ ĞºĞ»Ğ¸ĞµĞ½Ñ‚"""

async def close(self) -> None
    """Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ Ğ¸ Ğ¾Ñ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ñ€ĞµÑÑƒÑ€ÑÑ‹"""
```

#### ğŸ“„ `src/services/websocket/stream_manager.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ°Ğ¼Ğ¸ WebSocket Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

**Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def get_kline_stream_name(symbol: str, timeframe: str) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ¼Ñ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ° Ğ´Ğ»Ñ kline Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

def get_ticker_stream_name(symbol: str) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ¼Ñ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ° Ğ´Ğ»Ñ ticker Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

def get_depth_stream_name(symbol: str, level: str = "5") -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ¼Ñ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ° Ğ´Ğ»Ñ depth Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

def parse_stream_name(stream_name: str) -> dict
    """Ğ Ğ°Ğ·Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¸Ğ¼Ñ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ° Ğ½Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹"""
```

**ĞšĞ»Ğ°ÑÑ:**
```python
class StreamManager:
    """ĞœĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ WebSocket Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€Ğ° Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²"""

async def start(self) -> bool
    """Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²"""

async def stop(self) -> None
    """ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²"""

async def add_symbol_stream(self, symbol: str, timeframes: List[str]) -> bool
    """Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¸ Ğ´Ğ»Ñ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°"""

async def remove_symbol_stream(self, symbol: str) -> bool
    """Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¸ Ğ´Ğ»Ñ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°"""

async def update_subscriptions(self) -> bool
    """ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹"""

async def get_active_streams(self) -> List[str]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²"""

async def get_required_streams(self) -> List[str]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ñ‹Ñ… Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ² Ğ¸Ğ· Ğ‘Ğ”"""

async def handle_websocket_message(self, message: Dict[str, Any]) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚ WebSocket"""

async def handle_websocket_error(self, error: Exception) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ WebSocket"""

def get_stream_statistics(self) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¾Ğ²"""

def is_running(self) -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ»Ğ¸ Ğ¼ĞµĞ½ĞµĞ´Ğ¶ĞµÑ€"""
```

#### ğŸ“„ `src/services/websocket/binance_data_processor.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾Ñ‚ Binance WebSocket

**ĞšĞ»Ğ°ÑÑ:**
```python
class BinanceDataProcessor:
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾Ñ‚ Binance WebSocket"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ°"""

async def process_websocket_message(self, message: Dict[str, Any]) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚ WebSocket"""

async def _process_kline_message(self, stream_name: str, data: Dict[str, Any]) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ kline ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ"""

async def _process_ticker_message(self, stream_name: str, data: Dict[str, Any]) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ ticker ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ"""

async def _extract_symbol_timeframe(self, stream_name: str) -> Tuple[str, str]
    """Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» Ğ¸ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼ Ğ¸Ğ· Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ°"""

async def _validate_kline_data(self, data: Dict[str, Any]) -> bool
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ kline Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ"""

async def _convert_kline_to_candle(self, data: Dict[str, Any]) -> Dict[str, Any]
    """ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ kline Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ ÑĞ²ĞµÑ‡Ğ¸"""

async def _process_candle_data(self, symbol: str, timeframe: str, candle_data: Dict[str, Any]) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ²ĞµÑ‡Ğ¸ Ñ‡ĞµÑ€ĞµĞ· ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""

def get_processing_stats(self) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸"""

def reset_stats(self) -> None
    """Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸"""
```

#### ğŸ“„ `src/services/notifications/message_formatter.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹

**ĞšĞ»Ğ°ÑÑ:**
```python
class MessageFormatter:
    """Ğ¡ĞµÑ€Ğ²Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸ĞºĞ°"""

def format_signal_message(self, symbol: str, timeframe: str, price: float, price_change_percent: Optional[float] = None, rsi_value: Optional[float] = None, rsi_signal_type: Optional[str] = None, volume_change_percent: Optional[float] = None, ema_trend: Optional[str] = None, signal_type: str = "rsi_signal") -> str
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğµ"""

def format_rsi_signal(self, symbol: str, timeframe: str, rsi_value: float, signal_type: str, price: float, volume_change: Optional[float] = None) -> str
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ RSI ÑĞ¸Ğ³Ğ½Ğ°Ğ»"""

def format_ema_signal(self, symbol: str, timeframe: str, ema_data: Dict[str, Any], price: float) -> str
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ EMA ÑĞ¸Ğ³Ğ½Ğ°Ğ»"""

def format_price(self, price: float, precision: int = 8) -> str
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ†ĞµĞ½Ñƒ"""

def format_percentage(self, percentage: float, precision: int = 2) -> str
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ½Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ"""

def format_volume_change(self, volume_change: float) -> str
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞ¼Ğ°"""

def get_signal_emoji(self, signal_type: str) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¼Ğ¾Ğ´Ğ·Ğ¸ Ğ´Ğ»Ñ Ñ‚Ğ¸Ğ¿Ğ° ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°"""

def get_trend_emoji(self, trend: str) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¼Ğ¾Ğ´Ğ·Ğ¸ Ğ´Ğ»Ñ Ñ‚Ñ€ĞµĞ½Ğ´Ğ°"""

def get_timeframe_display(self, timeframe: str) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ĞµĞ¼Ğ¾Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°"""

def create_signal_header(self, signal_type: str, symbol: str, timeframe: str) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°"""

def create_price_section(self, price: float, price_change: Optional[float] = None) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞµĞºÑ†Ğ¸Ñ Ñ Ñ†ĞµĞ½Ğ¾Ğ¹"""

def create_indicator_section(self, rsi_value: Optional[float] = None, ema_data: Optional[Dict] = None) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞµĞºÑ†Ğ¸Ñ Ñ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°Ğ¼Ğ¸"""

def create_volume_section(self, volume_change: Optional[float] = None) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞµĞºÑ†Ğ¸Ñ Ñ Ğ¾Ğ±ÑŠĞµĞ¼Ğ¾Ğ¼"""

def create_footer_section(self) -> str
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ²Ğ°Ğ» ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ"""
```

**Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ:**
```python
def format_signal_message(symbol: str, timeframe: str, signal_data: Dict[str, Any]) -> str
    """Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°"""
```

#### ğŸ“„ `src/services/notifications/notification_queue.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ°ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ¾Ğ¹ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸

**ĞšĞ»Ğ°ÑÑ:**
```python
class NotificationQueue:
    """ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸"""

async def start_processing(self) -> None
    """Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸"""

async def stop_processing(self) -> None
    """ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºÑƒ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸"""

async def add_notification(self, user_id: int, message: str, reply_markup: Optional[InlineKeyboardMarkup] = None, priority: int = 0) -> None
    """Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ² Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ"""

async def add_signal_notification(self, user_id: int, signal_data: Dict[str, Any]) -> None
    """Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğµ"""

async def process_notifications(self) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¸Ğ· Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸"""

async def _process_single_notification(self, notification: Dict[str, Any]) -> bool
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¾Ğ´Ğ½Ğ¾ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ"""

async def _handle_processing_error(self, notification: Dict[str, Any], error: Exception) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞµ"""

def get_queue_stats(self) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸"""

def get_queue_size(self) -> int
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ¾Ñ‡ĞµÑ€ĞµĞ´Ğ¸"""

def is_processing(self) -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ»Ğ¸ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ"""

async def clear_queue(self) -> int
    """ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¾Ñ‡ĞµÑ€ĞµĞ´ÑŒ"""

async def retry_failed_notifications(self) -> int
    """ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ Ğ½ĞµÑƒĞ´Ğ°Ñ‡Ğ½Ñ‹Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ"""
```

**Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€:** `notification_queue = NotificationQueue()`

---

### ğŸ“‚ `src/services/cache/`

#### ğŸ“„ `src/services/cache/candle_cache.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšĞµÑˆ Ğ´Ğ»Ñ ÑĞ²ĞµÑ‡Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Redis

**ĞšĞ»Ğ°ÑÑ:**
```python
class CandleCache:
    """ĞšĞµÑˆ ÑĞ²ĞµÑ‡Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ² Redis"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞµÑˆĞ° ÑĞ²ĞµÑ‡ĞµĞ¹"""

async def get_candles(self, symbol: str, timeframe: str, limit: int = 100) -> List[Dict[str, Any]]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ²ĞµÑ‡Ğ¸ Ğ¸Ğ· ĞºĞµÑˆĞ°"""

async def add_new_candle(self, symbol: str, timeframe: str, candle_data: Dict[str, Any]) -> bool
    """Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²ÑƒÑ ÑĞ²ĞµÑ‡Ñƒ Ğ² ĞºĞµÑˆ"""

async def update_last_candle(self, symbol: str, timeframe: str, candle_data: Dict[str, Any]) -> bool
    """ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ (Ñ‚ĞµĞºÑƒÑ‰ÑƒÑ) ÑĞ²ĞµÑ‡Ñƒ"""

async def cache_historical_data(self, symbol: str, timeframe: str, candles: List[Dict[str, Any]]) -> bool
    """ĞšĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ"""

async def clear_cache(self, symbol: str, timeframe: Optional[str] = None) -> bool
    """ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ ĞºĞµÑˆ Ğ´Ğ»Ñ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°"""

async def get_last_candle(self, symbol: str, timeframe: str) -> Optional[Dict[str, Any]]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ÑÑ ÑĞ²ĞµÑ‡Ñƒ"""

async def get_candles_count(self, symbol: str, timeframe: str) -> int
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ²ĞµÑ‡ĞµĞ¹ Ğ² ĞºĞµÑˆĞµ"""

def _get_cache_key(self, symbol: str, timeframe: str) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ»ÑÑ‡ ĞºĞµÑˆĞ° Ğ´Ğ»Ñ ÑĞ²ĞµÑ‡ĞµĞ¹"""

def _serialize_candle(self, candle_data: Dict[str, Any]) -> str
    """Ğ¡ĞµÑ€Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ²ĞµÑ‡Ñƒ Ğ´Ğ»Ñ Redis"""

def _deserialize_candle(self, candle_str: str) -> Dict[str, Any]
    """Ğ”ĞµÑĞµÑ€Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ²ĞµÑ‡Ñƒ Ğ¸Ğ· Redis"""

async def _trim_cache(self, cache_key: str, max_size: int = 500) -> None
    """ĞĞ±Ñ€ĞµĞ·Ğ°Ñ‚ÑŒ ĞºĞµÑˆ Ğ´Ğ¾ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ğ°"""

async def get_cache_stats(self) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ ĞºĞµÑˆĞ°"""

async def warm_up_cache(self, symbols: List[str], timeframes: List[str]) -> Dict[str, bool]
    """ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑ‚ÑŒ ĞºĞµÑˆ Ğ´Ğ»Ñ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ² Ğ¸ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ¾Ğ²"""
```

**Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€:** `candle_cache = CandleCache()`

#### ğŸ“„ `src/services/cache/indicator_cache.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšĞµÑˆ Ğ´Ğ»Ñ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²

**ĞšĞ»Ğ°ÑÑ:**
```python
class IndicatorCache:
    """ĞšĞµÑˆ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ² Ğ² Redis"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞµÑˆĞ° Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²"""

async def get_rsi(self, symbol: str, timeframe: str, period: int = 14) -> Optional[float]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ RSI Ğ¸Ğ· ĞºĞµÑˆĞ°"""

async def set_rsi(self, symbol: str, timeframe: str, period: int, value: float, ttl: int = 300) -> bool
    """Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ RSI Ğ² ĞºĞµÑˆ"""

async def get_ema(self, symbol: str, timeframe: str, period: int) -> Optional[float]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ EMA Ğ¸Ğ· ĞºĞµÑˆĞ°"""

async def set_ema(self, symbol: str, timeframe: str, period: int, value: float, ttl: int = 300) -> bool
    """Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ EMA Ğ² ĞºĞµÑˆ"""

async def get_volume_change(self, symbol: str, timeframe: str) -> Optional[float]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞ¼Ğ° Ğ¸Ğ· ĞºĞµÑˆĞ°"""

async def set_volume_change(self, symbol: str, timeframe: str, value: float, ttl: int = 120) -> bool
    """Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞ¼Ğ° Ğ² ĞºĞµÑˆ"""

async def get_all_indicators(self, symbol: str, timeframe: str) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹ Ğ´Ğ»Ñ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ° Ğ¸ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°"""

async def invalidate_indicators(self, symbol: str, timeframe: Optional[str] = None) -> bool
    """Ğ˜Ğ½Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞµÑˆ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²"""

def _get_rsi_key(self, symbol: str, timeframe: str, period: int) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ»ÑÑ‡ Ğ´Ğ»Ñ RSI"""

def _get_ema_key(self, symbol: str, timeframe: str, period: int) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ»ÑÑ‡ Ğ´Ğ»Ñ EMA"""

def _get_volume_key(self, symbol: str, timeframe: str) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ»ÑÑ‡ Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ¾Ğ±ÑŠĞµĞ¼Ğ°"""

async def get_cache_stats(self) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ ĞºĞµÑˆĞ° Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²"""

async def cleanup_expired_indicators(self) -> int
    """ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ÑÑ€Ğ¾Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹"""
```

**Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€:** `indicator_cache = IndicatorCache()`

---

### ğŸ“‚ `src/services/data_fetchers/`

#### ğŸ“„ `src/services/data_fetchers/pair_validator.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ°Ñ€ Ñ‡ĞµÑ€ĞµĞ· Binance API

**ĞšĞ»Ğ°ÑÑ:**
```python
class PairValidator:
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ‚Ğ¾Ñ€ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ°Ñ€"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ‚Ğ¾Ñ€Ğ°"""

async def validate_pair(self, symbol: str) -> Dict[str, Any]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²ÑƒÑ Ğ¿Ğ°Ñ€Ñƒ Ñ‡ĞµÑ€ĞµĞ· Binance API"""

async def get_pair_info(self, symbol: str) -> Optional[Dict[str, Any]]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿Ğ°Ñ€Ğµ"""

async def check_pair_exists(self, symbol: str) -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ñ‹ Ğ½Ğ° Binance"""

async def get_trading_rules(self, symbol: str) -> Optional[Dict[str, Any]]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ»Ğ¸ Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ñ‹"""

async def get_all_trading_pairs(self) -> List[str]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ğ°Ñ€Ñ‹"""

async def search_pairs(self, query: str, limit: int = 10) -> List[str]
    """ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ°Ñ€ Ğ¿Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ"""

def _normalize_symbol(self, symbol: str) -> str
    """ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» Ğ¿Ğ°Ñ€Ñ‹"""

async def _fetch_exchange_info(self) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ±Ğ¸Ñ€Ğ¶Ğµ"""

def _extract_pair_info(self, symbol_info: Dict[str, Any]) -> Dict[str, Any]
    """Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿Ğ°Ñ€Ğµ Ğ¸Ğ· Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° API"""

async def _cache_exchange_info(self, exchange_info: Dict[str, Any]) -> None
    """ĞšĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ±Ğ¸Ñ€Ğ¶Ğµ"""
```

---

### ğŸ“‚ `src/services/data_fetchers/historical/`

#### ğŸ“„ `src/services/data_fetchers/historical/historical_fetcher.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ñ‡Ğ¸Ğº Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

**ĞšĞ»Ğ°ÑÑ:**
```python
class HistoricalDataFetcher:
    """Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ñ‡Ğ¸Ğº Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ñ‡Ğ¸ĞºĞ°"""

async def fetch_historical_candles(self, symbol: str, timeframe: str, limit: int = 500, start_time: Optional[int] = None, end_time: Optional[int] = None) -> List[Dict[str, Any]]
    """Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑĞ²ĞµÑ‡Ğ¸"""

async def fetch_for_all_timeframes(self, symbol: str, timeframes: List[str], limit: int = 500) -> Dict[str, List[Dict[str, Any]]]
    """Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ¾Ğ²"""

async def fetch_and_cache(self, symbol: str, timeframe: str, limit: int = 500) -> bool
    """Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ¸ ĞºĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ"""

async def update_latest_candles(self, symbol: str, timeframes: List[str]) -> Dict[str, bool]
    """ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ ÑĞ²ĞµÑ‡Ğ¸"""

def _calculate_start_time(self, timeframe: str, limit: int) -> int
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼Ñ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ´Ğ»Ñ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸"""

async def _validate_fetched_data(self, data: List[Dict[str, Any]]) -> bool
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ"""

async def _save_to_database(self, symbol: str, timeframe: str, candles: List[Dict[str, Any]]) -> bool
    """Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ² Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""
```

#### ğŸ“„ `src/services/data_fetchers/historical/historical_api_client.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** API ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

**ĞšĞ»Ğ°ÑÑ:**
```python
class HistoricalAPIClient:
    """API ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ API ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ°"""

async def get_klines(self, symbol: str, interval: str, limit: int = 500, start_time: Optional[int] = None, end_time: Optional[int] = None) -> List[List[Any]]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ klines Ñ‡ĞµÑ€ĞµĞ· REST API"""

async def get_24hr_ticker(self, symbol: str) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ 24-Ñ‡Ğ°ÑĞ¾Ğ²ÑƒÑ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ"""

async def get_exchange_info(self) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ±Ğ¸Ñ€Ğ¶Ğµ"""

async def ping(self) -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚ÑŒ API"""

def _build_klines_url(self, symbol: str, interval: str, limit: int, start_time: Optional[int], end_time: Optional[int]) -> str
    """ĞŸĞ¾ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ URL Ğ´Ğ»Ñ klines Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°"""

async def _make_request(self, url: str, params: Optional[Dict[str, Any]] = None) -> Dict[str, Any]
    """Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ HTTP Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ"""

def _handle_api_error(self, response: Dict[str, Any]) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ API"""

async def _rate_limit_handler(self) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğ¹ Ğ¿Ğ¾ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²"""
```

#### ğŸ“„ `src/services/data_fetchers/historical/historical_data_processor.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

**ĞšĞ»Ğ°ÑÑ:**
```python
class HistoricalDataProcessor:
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ°"""

async def process_and_save(self, symbol: str, timeframe: str, raw_data: List[List[Any]]) -> bool
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ ÑÑ‹Ñ€Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ"""

def convert_kline_to_candle(self, kline_data: List[Any]) -> Dict[str, Any]
    """ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ kline Ğ² Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ ÑĞ²ĞµÑ‡Ğ¸"""

async def validate_data_integrity(self, candles: List[Dict[str, Any]], timeframe: str) -> bool
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ†ĞµĞ»Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

def fill_missing_candles(self, candles: List[Dict[str, Any]], timeframe: str) -> List[Dict[str, Any]]
    """Ğ—Ğ°Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑ‰ĞµĞ½Ğ½Ñ‹Ğµ ÑĞ²ĞµÑ‡Ğ¸"""

async def save_to_database(self, pair_id: int, timeframe: str, candles: List[Dict[str, Any]]) -> int
    """Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ ÑĞ²ĞµÑ‡Ğ¸ Ğ² Ğ±Ğ°Ğ·Ñƒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

async def save_to_cache(self, symbol: str, timeframe: str, candles: List[Dict[str, Any]]) -> bool
    """Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ ÑĞ²ĞµÑ‡Ğ¸ Ğ² ĞºĞµÑˆ"""

def _sort_candles_by_time(self, candles: List[Dict[str, Any]]) -> List[Dict[str, Any]]
    """ĞÑ‚ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ²ĞµÑ‡Ğ¸ Ğ¿Ğ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸"""

def _remove_duplicates(self, candles: List[Dict[str, Any]]) -> List[Dict[str, Any]]
    """Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€ÑƒÑÑ‰Ğ¸ĞµÑÑ ÑĞ²ĞµÑ‡Ğ¸"""

def _validate_candle_data(self, candle: Dict[str, Any]) -> bool
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ÑĞ²ĞµÑ‡Ğ¸"""
```

---

## ğŸ› ï¸ UTILS LAYER - Ğ£Ğ¢Ğ˜Ğ›Ğ˜Ğ¢Ğ«

### ğŸ“„ `src/utils/constants.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ’ÑĞµ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

**ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹:**
```python
# Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸
APP_NAME: str = "CryptoBot"
APP_VERSION: str = "1.0.0"

# Binance ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹
BINANCE_TIMEFRAMES: List[str] = ["1m", "3m", "5m", "15m", "30m", "1h", "2h", "4h", "6h", "8h", "12h", "1d", "3d", "1w", "1M"]
TIMEFRAME_TO_MS: Dict[str, int] = {...}  # ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ² Ğ¼Ğ¸Ğ»Ğ»Ğ¸ÑĞµĞºÑƒĞ½Ğ´Ñ‹
TIMEFRAME_NAMES: Dict[str, str] = {...}  # Ğ§ĞµĞ»Ğ¾Ğ²ĞµĞºĞ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ

# Ğ˜Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹
RSI_PERIODS: List[int] = [14, 21, 30]
EMA_PERIODS: List[int] = [20, 50, 100, 200]

# Ğ­Ğ¼Ğ¾Ğ´Ğ·Ğ¸
EMOJI: Dict[str, str] = {...}
SIGNAL_EMOJIS: Dict[str, str] = {...}
TREND_EMOJIS: Dict[str, str] = {...}

# Ğ’Ğ°Ğ»ÑÑ‚Ñ‹
CURRENCY_SYMBOLS: Dict[str, str] = {...}
QUOTE_ASSETS: List[str] = ["USDT", "BUSD", "BTC", "ETH", "BNB"]

# Ğ˜Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»Ñ‹ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ° ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²
SIGNAL_REPEAT_INTERVALS: Dict[str, int] = {...}

# Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ
REGEX_PATTERNS: Dict[str, str] = {...}

# Ğ›Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹
MIN_SYMBOL_LENGTH: int = 3
MAX_SYMBOL_LENGTH: int = 20
MAX_PAIRS_PER_USER: int = 50
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def get_timeframe_ms(timeframe: str) -> int
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¼Ğ¸Ğ»Ğ»Ğ¸ÑĞµĞºÑƒĞ½Ğ´ Ğ´Ğ»Ñ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°"""

def get_signal_emoji(signal_type: str) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¼Ğ¾Ğ´Ğ·Ğ¸ Ğ´Ğ»Ñ Ñ‚Ğ¸Ğ¿Ğ° ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°"""

def get_currency_symbol(currency: str) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» Ğ²Ğ°Ğ»ÑÑ‚Ñ‹"""

def is_valid_timeframe(timeframe: str) -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°"""

def get_repeat_interval(signal_type: str) -> int
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ Ñ‚Ğ¸Ğ¿Ğ° ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°"""
```

### ğŸ“„ `src/utils/exceptions.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğµ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ

**Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğµ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ:**
```python
class CryptoBotError(Exception):
    """Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ¾Ğµ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾-Ğ±Ğ¾Ñ‚Ğ°"""
```

**Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸:**
```python
class ConfigurationError(CryptoBotError):
    """ĞÑˆĞ¸Ğ±ĞºĞ¸ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸"""

class InvalidConfigValueError(ConfigurationError):
    """ĞĞµĞ²ĞµÑ€Ğ½Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸"""

class MissingConfigError(ConfigurationError):
    """ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ"""
```

**Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:**
```python
class DatabaseError(CryptoBotError):
    """ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

class ConnectionError(DatabaseError):
    """ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Ğ‘Ğ”"""

class RecordNotFoundError(DatabaseError):
    """Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°"""

class RecordAlreadyExistsError(DatabaseError):
    """Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ ÑƒĞ¶Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚"""

class ValidationError(DatabaseError):
    """ĞÑˆĞ¸Ğ±ĞºĞ° Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""
```

**Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Redis:**
```python
class RedisError(CryptoBotError):
    """ĞÑˆĞ¸Ğ±ĞºĞ¸ Redis"""

class RedisConnectionError(RedisError):
    """ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Redis"""

class CacheError(RedisError):
    """ĞÑˆĞ¸Ğ±ĞºĞ° ĞºĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"""
```

**Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ WebSocket:**
```python
class WebSocketConnectionError(CryptoBotError):
    """ĞÑˆĞ¸Ğ±ĞºĞ° WebSocket Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ"""

class WebSocketReconnectError(WebSocketConnectionError):
    """ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿ĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ WebSocket"""

class StreamError(WebSocketConnectionError):
    """ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""
```

**Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Binance API:**
```python
class BinanceAPIError(CryptoBotError):
    """ĞÑˆĞ¸Ğ±ĞºĞ¸ Binance API"""

class BinanceDataError(BinanceAPIError):
    """ĞÑˆĞ¸Ğ±ĞºĞ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾Ñ‚ Binance"""

class RateLimitError(BinanceAPIError):
    """ĞŸÑ€ĞµĞ²Ñ‹ÑˆĞµĞ½ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²"""

class InvalidSymbolError(BinanceAPIError):
    """ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ñ‹"""
```

**Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²:**
```python
class SignalError(CryptoBotError):
    """ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""

class IndicatorCalculationError(SignalError):
    """ĞÑˆĞ¸Ğ±ĞºĞ° Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°"""

class NotificationError(SignalError):
    """ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ"""
```

### ğŸ“„ `src/utils/validators.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ‚Ğ¾Ñ€Ñ‹ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²:**
```python
def validate_trading_pair_symbol(symbol: str) -> tuple[bool, Optional[str]]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ñ‹"""

def extract_base_quote_assets(symbol: str) -> Optional[Tuple[str, str]]
    """Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ Ğ±Ğ°Ğ·Ğ¾Ğ²ÑƒÑ Ğ¸ ĞºĞ¾Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ÑƒÑ Ğ²Ğ°Ğ»ÑÑ‚Ñ‹ Ğ¸Ğ· ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°"""

def normalize_trading_symbol(symbol: str) -> str
    """ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ°Ñ€Ñ‹"""
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ¾Ğ²:**
```python
def validate_timeframe(timeframe: str) -> tuple[bool, Optional[str]]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼"""

def validate_timeframes_config(timeframes_config: dict) -> tuple[bool, Optional[str]]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ¾Ğ² Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ñ†ĞµĞ½ Ğ¸ Ğ¾Ğ±ÑŠĞµĞ¼Ğ¾Ğ²:**
```python
def validate_price(price: Union[str, float, Decimal]) -> tuple[bool, Optional[str]]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ†ĞµĞ½Ñƒ"""

def validate_volume(volume: Union[str, float, Decimal]) -> tuple[bool, Optional[str]]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ±ÑŠĞµĞ¼ Ñ‚Ğ¾Ñ€Ğ³Ğ¾Ğ²"""

def validate_percentage(percentage: Union[str, float]) -> tuple[bool, Optional[str]]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ½Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ"""
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹:**
```python
def validate_user_id(user_id: Union[str, int]) -> tuple[bool, Optional[str]]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ID Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Telegram"""

def validate_username(username: str) -> tuple[bool, Optional[str]]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²:**
```python
def validate_rsi_value(rsi: Union[str, float]) -> tuple[bool, Optional[str]]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ RSI"""

def validate_ema_period(period: Union[str, int]) -> tuple[bool, Optional[str]]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´ EMA"""

def validate_signal_type(signal_type: str) -> tuple[bool, Optional[str]]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚Ğ¸Ğ¿ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°"""
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Binance:**
```python
def validate_binance_kline_data(kline_data: Dict[str, Any]) -> tuple[bool, str]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ kline Ğ¾Ñ‚ Binance"""

def validate_binance_kline_data_detailed(kline_data: Dict[str, Any]) -> tuple[bool, str]
    """Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… kline Ğ¾Ñ‚ Binance"""

def validate_websocket_message(message: Dict[str, Any]) -> tuple[bool, str]
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ WebSocket"""
```

### ğŸ“„ `src/utils/time_helpers.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ ÑĞ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½ĞµĞ¼

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¼ĞµÑ‚Ğ¾Ğº:**
```python
def get_current_timestamp() -> int
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰ÑƒÑ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½ÑƒÑ Ğ¼ĞµÑ‚ĞºÑƒ Ğ² Ğ¼Ğ¸Ğ»Ğ»Ğ¸ÑĞµĞºÑƒĞ½Ğ´Ğ°Ñ…"""

def get_current_timestamp_seconds() -> int
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Unix timestamp Ğ² ÑĞµĞºÑƒĞ½Ğ´Ğ°Ñ…"""

def timestamp_to_datetime(timestamp: int, in_milliseconds: bool = True) -> datetime
    """ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Unix timestamp Ğ² datetime Ğ¾Ğ±ÑŠĞµĞºÑ‚"""

def datetime_to_timestamp(dt: datetime, in_milliseconds: bool = True) -> int
    """ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ datetime Ğ² Unix timestamp"""
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ¾Ğ²:**
```python
def timeframe_to_milliseconds(timeframe: str) -> Optional[int]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¼Ğ¸Ğ»Ğ»Ğ¸ÑĞµĞºÑƒĞ½Ğ´ Ğ´Ğ»Ñ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°"""

def timeframe_to_seconds(timeframe: str) -> Optional[int]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞµĞºÑƒĞ½Ğ´ Ğ´Ğ»Ñ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°"""

def get_timeframe_display_name(timeframe: str) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ¾Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ğ¾Ğµ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°"""

def align_timestamp_to_timeframe(timestamp: int, timeframe: str) -> int
    """Ğ’Ñ‹Ñ€Ğ¾Ğ²Ğ½ÑÑ‚ÑŒ timestamp Ğ¿Ğ¾ Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ğµ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°"""

def calculate_time_until_next_candle(timeframe: str, current_time: Optional[int] = None) -> int
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼Ñ Ğ´Ğ¾ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ¹ ÑĞ²ĞµÑ‡Ğ¸"""

def get_candle_open_time(timestamp: int, timeframe: str) -> int
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼Ñ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ ÑĞ²ĞµÑ‡Ğ¸ Ğ´Ğ»Ñ timestamp"""

def get_candle_close_time(timestamp: int, timeframe: str) -> int
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼Ñ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ñ ÑĞ²ĞµÑ‡Ğ¸ Ğ´Ğ»Ñ timestamp"""
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ğ°Ğ¼Ğ¸ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸:**
```python
def get_time_range_for_candles(timeframe: str, count: int, end_time: Optional[int] = None) -> Tuple[int, int]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° ÑĞ²ĞµÑ‡ĞµĞ¹"""

def split_time_range(start_time: int, end_time: int, timeframe: str, max_candles: int = 1000) -> List[Tuple[int, int]]
    """Ğ Ğ°Ğ·Ğ±Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ½Ğ° Ñ‡Ğ°ÑÑ‚Ğ¸"""

def format_duration(seconds: int) -> str
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ² Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğ¹ Ğ²Ğ¸Ğ´"""

def parse_duration_string(duration_str: str) -> int
    """Ğ Ğ°Ğ·Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ ÑÑ‚Ñ€Ğ¾ĞºÑƒ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ Ğ² ÑĞµĞºÑƒĞ½Ğ´Ñ‹"""
```

### ğŸ“„ `src/utils/math_helpers.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ¾Ğ²

**Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¼Ğ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def safe_divide(dividend: Union[float, Decimal], divisor: Union[float, Decimal]) -> float
    """Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğµ Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¾Ğ¹ Ğ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ğ½Ğ° Ğ½Ğ¾Ğ»ÑŒ"""

def calculate_percentage_change(old_value: float, new_value: float) -> float
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ½Ğ¾Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ´Ğ²ÑƒĞ¼Ñ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸ÑĞ¼Ğ¸"""

def round_to_precision(value: Union[float, Decimal], precision: int) -> float
    """ĞĞºÑ€ÑƒĞ³Ğ»Ğ¸Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ¾ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ½Ğ¾Ğ¹ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸"""

def clamp_value(value: float, min_value: float, max_value: float) -> float
    """ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ğ¾Ğ¼"""

def normalize_to_range(value: float, from_min: float, from_max: float, to_min: float, to_max: float) -> float
    """ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğº Ğ½Ğ¾Ğ²Ğ¾Ğ¼Ñƒ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ñƒ"""
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ ÑĞºĞ¾Ğ»ÑŒĞ·ÑÑ‰Ğ¸Ñ… ÑÑ€ĞµĞ´Ğ½Ğ¸Ñ…:**
```python
def calculate_simple_moving_average(values: List[float], period: int) -> Optional[float]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğµ ÑĞºĞ¾Ğ»ÑŒĞ·ÑÑ‰ĞµĞµ ÑÑ€ĞµĞ´Ğ½ĞµĞµ (SMA)"""

def calculate_exponential_moving_average(values: List[float], period: int, previous_ema: Optional[float] = None) -> Optional[float]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ÑĞºÑĞ¿Ğ¾Ğ½ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞºĞ¾Ğ»ÑŒĞ·ÑÑ‰ĞµĞµ ÑÑ€ĞµĞ´Ğ½ĞµĞµ (EMA)"""

def calculate_weighted_moving_average(values: List[float], period: int) -> Optional[float]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ²Ğ·Ğ²ĞµÑˆĞµĞ½Ğ½Ğ¾Ğµ ÑĞºĞ¾Ğ»ÑŒĞ·ÑÑ‰ĞµĞµ ÑÑ€ĞµĞ´Ğ½ĞµĞµ (WMA)"""
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²:**
```python
def calculate_rsi_basic(prices: List[float], period: int = 14) -> Optional[float]
    """Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° RSI"""

def calculate_true_range(high: float, low: float, previous_close: float) -> float
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¸Ğ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ (True Range)"""

def calculate_average_true_range(true_ranges: List[float], period: int = 14) -> Optional[float]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ÑÑ€ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ¸ÑÑ‚Ğ¸Ğ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ (ATR)"""

def calculate_bollinger_bands(prices: List[float], period: int = 20, std_dev: float = 2.0) -> Optional[Tuple[float, float, float]]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğ¾ÑÑ‹ Ğ‘Ğ¾Ğ»Ğ»Ğ¸Ğ½Ğ´Ğ¶ĞµÑ€Ğ°"""
```

**Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def calculate_standard_deviation(values: List[float]) -> float
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¾Ğµ Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ğµ"""

def calculate_variance(values: List[float]) -> float
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ´Ğ¸ÑĞ¿ĞµÑ€ÑĞ¸Ñ"""

def calculate_correlation(x_values: List[float], y_values: List[float]) -> float
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ĞºĞ¾Ñ€Ñ€ĞµĞ»ÑÑ†Ğ¸Ñ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ´Ğ²ÑƒĞ¼Ñ Ñ€ÑĞ´Ğ°Ğ¼Ğ¸"""

def find_peaks(values: List[float], min_height: Optional[float] = None) -> List[int]
    """ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¸ĞºĞ¸ Ğ² Ñ€ÑĞ´Ñƒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹"""

def find_troughs(values: List[float], max_height: Optional[float] = None) -> List[int]
    """ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ²Ğ¿Ğ°Ğ´Ğ¸Ğ½Ñ‹ Ğ² Ñ€ÑĞ´Ñƒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹"""
```

### ğŸ“„ `src/utils/logger.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸:**
```python
def setup_logging(log_level: Optional[str] = None, json_logs: bool = False, log_file: Optional[str] = None) -> None
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"""

def get_logger(name: str) -> Any
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ³ĞµÑ€ Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ"""

def configure_structlog() -> None
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ"""

def setup_file_logging(log_file: str) -> None
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ñ„Ğ°Ğ¹Ğ»"""

def setup_console_logging() -> None
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒĞ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ"""
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹:**
```python
def log_user_action(action: str, user_id: int, **kwargs) -> None
    """Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

def log_database_operation(operation: str, table: str, **kwargs) -> None
    """Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ Ğ±Ğ°Ğ·Ğ¾Ğ¹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

def log_websocket_event(event: str, **kwargs) -> None
    """Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ WebSocket ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ"""

def log_signal_generated(signal_type: str, symbol: str, timeframe: str, **kwargs) -> None
    """Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°"""

def log_notification_sent(user_id: int, notification_type: str, success: bool, **kwargs) -> None
    """Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºÑƒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ"""

def log_api_request(endpoint: str, method: str, status_code: int, **kwargs) -> None
    """Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ API Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ"""

def log_cache_operation(operation: str, key: str, hit: bool = None, **kwargs) -> None
    """Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ ĞºĞµÑˆĞµĞ¼"""
```

**ĞšĞ»Ğ°ÑÑÑ‹:**
```python
class LoggerMixin:
    """ĞœĞ¸ĞºÑĞ¸Ğ½ Ğ´Ğ»Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ² ĞºĞ»Ğ°ÑÑÑ‹"""
    
    @property
    def logger(self) -> Any
        """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ³ĞµÑ€ Ğ´Ğ»Ñ ĞºĞ»Ğ°ÑÑĞ°"""
    
    def log_info(self, message: str, **kwargs) -> None
        """Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ"""
    
    def log_error(self, message: str, error: Optional[Exception] = None, **kwargs) -> None
        """Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ"""
    
    def log_warning(self, message: str, **kwargs) -> None
        """Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€ĞµĞ´ÑƒĞ¿Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğµ"""
    
    def log_debug(self, message: str, **kwargs) -> None
        """Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ğ»Ğ°Ğ´Ğ¾Ñ‡Ğ½Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ"""
```

---

## âš™ï¸ CONFIG LAYER - ĞšĞĞĞ¤Ğ˜Ğ“Ğ£Ğ ĞĞ¦Ğ˜Ğ¯

### ğŸ“„ `src/config/bot_config.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Telegram Ğ±Ğ¾Ñ‚Ğ°

**ĞšĞ»Ğ°ÑÑ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸:**
```python
class BotConfig(BaseSettings):
    """ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Telegram Ğ±Ğ¾Ñ‚Ğ°"""
    
    # ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
    bot_token: str                              # Ğ¢Ğ¾ĞºĞµĞ½ Ğ±Ğ¾Ñ‚Ğ°
    debug: bool                                 # Ğ ĞµĞ¶Ğ¸Ğ¼ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸
    log_level: str                              # Ğ£Ñ€Ğ¾Ğ²ĞµĞ½ÑŒ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
    max_connections: int                        # ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¹
    request_timeout: int                        # Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹
    notification_rate_limit: int               # Ğ›Ğ¸Ğ¼Ğ¸Ñ‚ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹
    signal_check_interval: int                 # Ğ˜Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²
    
    # Ğ”ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ñ‹Ğµ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
    default_timeframes: List[str]              # Ğ”ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ñ‹Ğµ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ñ‹
    default_pair: str                          # Ğ”ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ğ°Ñ Ğ¿Ğ°Ñ€Ğ°
    rsi_period: int                            # ĞŸĞµÑ€Ğ¸Ğ¾Ğ´ RSI
    ema_periods: List[int]                     # ĞŸĞµÑ€Ğ¸Ğ¾Ğ´Ñ‹ EMA
    
    # Ğ—Ğ¾Ğ½Ñ‹ RSI
    rsi_oversold_strong: float                 # Ğ¡Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ğ¿ĞµÑ€ĞµĞ¿Ñ€Ğ¾Ğ´Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ
    rsi_oversold_medium: float                 # Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ğ¿ĞµÑ€ĞµĞ¿Ñ€Ğ¾Ğ´Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ
    rsi_oversold_normal: float                 # ĞĞ±Ñ‹Ñ‡Ğ½Ğ°Ñ Ğ¿ĞµÑ€ĞµĞ¿Ñ€Ğ¾Ğ´Ğ°Ğ½Ğ½Ğ¾ÑÑ‚ÑŒ
    rsi_overbought_normal: float               # ĞĞ±Ñ‹Ñ‡Ğ½Ğ°Ñ Ğ¿ĞµÑ€ĞµĞºÑƒĞ¿Ğ»ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ
    rsi_overbought_medium: float               # Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ğ¿ĞµÑ€ĞµĞºÑƒĞ¿Ğ»ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ
    rsi_overbought_strong: float               # Ğ¡Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ğ¿ĞµÑ€ĞµĞºÑƒĞ¿Ğ»ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ
    
    # Ğ˜Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»Ñ‹ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ° ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²
    signal_repeat_interval: int                # Ğ˜Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ°
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def get_bot_config() -> BotConfig
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ±Ğ¾Ñ‚Ğ°"""

def is_debug_mode() -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½ Ğ»Ğ¸ Ñ€ĞµĞ¶Ğ¸Ğ¼ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸"""

def get_rsi_zones() -> Dict[str, float]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ·Ğ¾Ğ½Ñ‹ RSI Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""

def validate_config() -> None
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ±Ğ¾Ñ‚Ğ°"""

def get_default_timeframes() -> List[str]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ´ĞµÑ„Ğ¾Ğ»Ñ‚Ğ½Ñ‹Ğµ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ñ‹"""

def get_notification_settings() -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹"""
```

### ğŸ“„ `src/config/database_config.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ PostgreSQL

**ĞšĞ»Ğ°ÑÑ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸:**
```python
class DatabaseConfig(BaseSettings):
    """ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""
    
    # ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
    database_url: str                          # URL Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
    host: str                                  # Ğ¥Ğ¾ÑÑ‚ Ğ‘Ğ”
    port: int                                  # ĞŸĞ¾Ñ€Ñ‚ Ğ‘Ğ”
    name: str                                  # Ğ˜Ğ¼Ñ Ğ‘Ğ”
    user: str                                  # ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ‘Ğ”
    password: str                              # ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ Ğ‘Ğ”
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿ÑƒĞ»Ğ° ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹
    pool_size: int                             # Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ¿ÑƒĞ»Ğ°
    max_overflow: int                          # ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿ĞµÑ€ĞµĞ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ
    pool_timeout: int                          # Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ Ğ¿ÑƒĞ»Ğ°
    pool_recycle: int                          # Ğ’Ñ€ĞµĞ¼Ñ Ğ¿ĞµÑ€ĞµĞ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
    connect_timeout: int                       # Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
    command_timeout: int                       # Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹
    
    # SSL Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
    ssl_mode: str                              # Ğ ĞµĞ¶Ğ¸Ğ¼ SSL
    ssl_cert: Optional[str]                    # SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚
    ssl_key: Optional[str]                     # SSL ĞºĞ»ÑÑ‡
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ SQL
    echo_sql: bool                             # Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ SQL Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹
    echo_pool: bool                            # Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿ÑƒĞ» ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def get_database_config() -> DatabaseConfig
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…"""

def get_database_url(test_mode: bool = False) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ URL Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Ğ‘Ğ”"""

def get_sqlalchemy_engine_args() -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ´Ğ»Ñ SQLAlchemy engine"""

def validate_database_config() -> None
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ‘Ğ”"""

def get_connection_pool_settings() -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿ÑƒĞ»Ğ° ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹"""
```

### ğŸ“„ `src/config/redis_config.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Redis

**ĞšĞ»Ğ°ÑÑ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸:**
```python
class RedisConfig(BaseSettings):
    """ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Redis"""
    
    # ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
    redis_url: Optional[str]                   # URL Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
    host: str                                  # Ğ¥Ğ¾ÑÑ‚ Redis
    port: int                                  # ĞŸĞ¾Ñ€Ñ‚ Redis
    db: int                                    # ĞĞ¾Ğ¼ĞµÑ€ Ğ‘Ğ”
    password: Optional[str]                    # ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ Redis
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
    socket_timeout: int                        # Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ ÑĞ¾ĞºĞµÑ‚Ğ°
    socket_connect_timeout: int                # Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
    socket_keepalive: bool                     # Keep-alive
    socket_keepalive_options: Dict[str, int]   # ĞĞ¿Ñ†Ğ¸Ğ¸ keep-alive
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿ÑƒĞ»Ğ°
    max_connections: int                       # ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¹
    retry_on_timeout: bool                     # ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€ Ğ¿Ñ€Ğ¸ Ñ‚Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚Ğµ
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
    encoding: str                              # ĞšĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°
    decode_responses: bool                     # Ğ”ĞµĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ğ²ĞµÑ‚Ñ‹
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ĞºĞµÑˆĞ°
    key_prefix: str                            # ĞŸÑ€ĞµÑ„Ğ¸ĞºÑ ĞºĞ»ÑÑ‡ĞµĞ¹
    default_ttl: int                           # TTL Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ
```

**Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ:**
```python
class TestRedisConfig(RedisConfig):
    """ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Redis"""
    
    db: int                                    # Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ´Ñ€ÑƒĞ³ÑƒÑ Ğ‘Ğ” Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¾Ğ²
    key_prefix: str                            # Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑ
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def get_redis_config() -> RedisConfig
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ Redis"""

def get_test_redis_config() -> TestRedisConfig
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Redis"""

def get_redis_url(test_mode: bool = False) -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ URL Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Redis"""

def get_redis_connection_params(test_mode: bool = False) -> dict
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Redis"""

def get_cache_key(key_type: str, *args, test_mode: bool = False) -> str
    """Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ»ÑÑ‡ Ğ´Ğ»Ñ ĞºĞµÑˆĞ° Ñ Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑĞ¾Ğ¼"""

def validate_redis_config() -> None
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Redis"""
```

### ğŸ“„ `src/config/binance_config.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Binance API

**ĞšĞ»Ğ°ÑÑ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸:**
```python
class BinanceConfig(BaseSettings):
    """ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Binance API"""
    
    # URL endpoints
    websocket_url: str                         # WebSocket URL
    rest_api_url: str                          # REST API URL
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ WebSocket
    reconnect_interval: int                    # Ğ˜Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» Ğ¿ĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
    ping_interval: int                         # Ğ˜Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» ping
    connection_timeout: int                    # Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
    max_reconnect_attempts: int                # ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº Ğ¿ĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ REST API
    request_timeout: int                       # Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°
    rate_limit_per_minute: int                 # Ğ›Ğ¸Ğ¼Ğ¸Ñ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² Ğ² Ğ¼Ğ¸Ğ½ÑƒÑ‚Ñƒ
    
    # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
    max_klines_per_request: int                # ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ klines Ğ·Ğ° Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ
    historical_data_batch_size: int           # Ğ Ğ°Ğ·Ğ¼ĞµÑ€ Ğ±Ğ°Ñ‚Ñ‡Ğ° Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
```

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def get_binance_config() -> BinanceConfig
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Binance"""

def get_websocket_url() -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ URL WebSocket"""

def get_rest_api_url() -> str
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ URL REST API"""

def validate_binance_config() -> None
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Binance"""

def get_connection_settings() -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ"""

def get_rate_limit_settings() -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ¾Ğ²"""
```

### ğŸ“„ `src/config/logging_config.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

**Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:**
```python
def get_logging_config() -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"""

def setup_structlog() -> None
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ"""

def configure_file_logging(log_file: str, log_level: str = "INFO") -> None
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Ñ„Ğ°Ğ¹Ğ»Ñ‹"""

def configure_console_logging(log_level: str = "INFO") -> None
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒĞ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ"""

def get_log_formatters() -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸ĞºĞ¸ Ğ»Ğ¾Ğ³Ğ¾Ğ²"""

def setup_rotating_file_handler(log_file: str, max_bytes: int = 10485760, backup_count: int = 5) -> None
    """ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ñ€Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ»Ğ¾Ğ³ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²"""
```

---

## ğŸ“ Ğ’Ğ¡ĞŸĞĞœĞĞ“ĞĞ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ• Ğ¤ĞĞ™Ğ›Ğ«

### ğŸ“„ `.env.example`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ

**ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ:**
```bash
# Telegram Bot Configuration
BOT_TOKEN=7826210826:AAGUqh1MgxC8M0_gj-u6k6fmRjRMKqJbFLg

# Database Configuration  
DATABASE_URL=postgresql://crypto_user:crypto_pass@postgres:5432/crypto_bot
DB_HOST=postgres
DB_PORT=5432
DB_NAME=crypto_bot
DB_USER=crypto_user
DB_PASSWORD=crypto_pass

# Redis Configuration
REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# Binance API Configuration
BINANCE_BASE_URL=wss://stream.binance.com:9443/ws
BINANCE_REST_URL=https://api.binance.com

# Application Settings
DEBUG=True
LOG_LEVEL=INFO
MAX_CONNECTIONS=100

# Rate Limiting
NOTIFICATION_RATE_LIMIT=10
SIGNAL_CHECK_INTERVAL=60

# Default Settings
DEFAULT_RSI_PERIOD=14
DEFAULT_EMA_PERIODS=20,50,100,200
DEFAULT_TIMEFRAMES=1m,5m,15m,1h,2h,4h,1d,1w
```

### ğŸ“„ `docker-compose.yml`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Docker ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²

### ğŸ“„ `Dockerfile` 
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ±Ñ€Ğ°Ğ· Docker Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ

### ğŸ“„ `requirements.txt`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Python Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

### ğŸ“„ `scripts/init.sql`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** SQL ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### ğŸ“„ `scripts/test_websocket.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ WebSocket Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ

---

## ğŸ” Ğ‘Ğ«Ğ¡Ğ¢Ğ Ğ«Ğ™ ĞŸĞĞ˜Ğ¡Ğš ĞŸĞ Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ¯Ğœ

### ğŸ¤– **Telegram Bot Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸:**
- **Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ±Ğ¾Ñ‚Ğ°:** `src/main.py â†’ main()`
- **Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ:** `src/bot/handlers/start_handler.py â†’ handle_start_command()`
- **Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ñ‹:** `src/bot/handlers/add_pair/add_pair_handler.py â†’ handle_add_pair_start()`
- **Ğ£Ğ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ñ‹:** `src/bot/handlers/remove_pair_handler.py â†’ handle_remove_pair_start()`
- **ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¿Ğ°Ñ€:** `src/bot/handlers/my_pairs/my_pairs_handler.py â†’ handle_my_pairs_start()`
- **Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°Ğ¼Ğ¸:** `src/bot/handlers/my_pairs/my_pairs_handler.py â†’ handle_timeframe_toggle()`

### ğŸ“Š **Ğ Ğ°ÑÑ‡ĞµÑ‚ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²:**
- **RSI Ñ€Ğ°ÑÑ‡ĞµÑ‚:** `src/services/indicators/rsi_calculator.py â†’ calculate_rsi()`
- **EMA Ñ€Ğ°ÑÑ‡ĞµÑ‚:** `src/services/indicators/ema_calculator.py â†’ calculate_ema()`
- **ĞœĞ½Ğ¾Ğ¶ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğµ EMA:** `src/services/indicators/ema_calculator.py â†’ calculate_multiple_ema()`
- **Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞ¼Ğ°:** `src/services/signals/signal_aggregator.py â†’ _calculate_volume_change()`

### ğŸš¨ **Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²:**
- **RSI ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹:** `src/services/signals/rsi_signals.py â†’ check_rsi_signals()`
- **ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° RSI:** `src/services/signals/rsi_signals.py â†’ process_rsi_update()`
- **ĞĞ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²:** `src/services/signals/signal_aggregator.py â†’ process_candle_update()`
- **ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ‚Ğ¸Ğ¿Ğ° ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°:** `src/services/signals/rsi_signals.py â†’ _determine_rsi_signal_type()`

### ğŸ“± **Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ:**
- **ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² Telegram:** `src/services/notifications/telegram_sender.py â†’ send_signal_notification()`
- **Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹:** `src/services/notifications/message_formatter.py â†’ format_signal_message()`
- **ĞÑ‡ĞµÑ€ĞµĞ´ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹:** `src/services/notifications/notification_queue.py â†’ add_notification()`
- **ĞœĞ°ÑÑĞ¾Ğ²Ñ‹Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ:** `src/services/notifications/telegram_sender.py â†’ send_bulk_notifications()`

### ğŸ—„ï¸ **Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:**
- **Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ:** `src/data/repositories/user_repository.py â†’ create_user_from_telegram()`
- **ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ:** `src/data/repositories/user_repository.py â†’ get_by_telegram_id()`
- **Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼Ğ¸:** `src/data/repositories/pair_repository.py â†’ get_or_create_pair()`
- **Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ:** `src/data/repositories/pair_repository.py â†’ add_user_to_pair()`
- **Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²:** `src/data/models/signal_history_model.py â†’ create_signal_record()`

### ğŸ“¡ **WebSocket:**
- **ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº Binance:** `src/services/websocket/binance_websocket.py â†’ connect()`
- **Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ°Ğ¼Ğ¸:** `src/services/websocket/stream_manager.py â†’ add_symbol_stream()`
- **ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹:** `src/services/websocket/binance_data_processor.py â†’ process_websocket_message()`
- **ĞŸĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ:** `src/services/websocket/binance_websocket.py â†’ reconnect()`

### ğŸ’¾ **ĞšĞµÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:**
- **ĞšĞµÑˆ ÑĞ²ĞµÑ‡ĞµĞ¹:** `src/services/cache/candle_cache.py â†’ add_new_candle()`
- **ĞšĞµÑˆ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²:** `src/services/cache/indicator_cache.py â†’ set_rsi()`
- **ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¸Ğ· ĞºĞµÑˆĞ°:** `src/services/cache/candle_cache.py â†’ get_candles()`
- **ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° ĞºĞµÑˆĞ°:** `src/services/cache/candle_cache.py â†’ clear_cache()`

### âœ… **Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ:**
- **Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ°:** `src/utils/validators.py â†’ validate_trading_pair_symbol()`
- **Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ RSI:** `src/utils/validators.py â†’ validate_rsi_value()`
- **Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ñ‚Ğ°Ğ¹Ğ¼Ñ„Ñ€ĞµĞ¹Ğ¼Ğ°:** `src/utils/validators.py â†’ validate_timeframe()`
- **Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Binance Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:** `src/utils/validators.py â†’ validate_binance_kline_data_detailed()`

### ğŸ› ï¸ **Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹:**
- **Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° ÑĞ¾ Ğ²Ñ€ĞµĞ¼ĞµĞ½ĞµĞ¼:** `src/utils/time_helpers.py â†’ timestamp_to_datetime()`
- **ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸:** `src/utils/math_helpers.py â†’ calculate_percentage_change()`
- **Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ:** `src/utils/logger.py â†’ log_user_action()`
- **ĞšĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹:** `src/utils/constants.py â†’ get_timeframe_ms()`

### âš™ï¸ **ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ:**
- **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ±Ğ¾Ñ‚Ğ°:** `src/config/bot_config.py â†’ get_bot_config()`
- **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ‘Ğ”:** `src/config/database_config.py â†’ get_database_config()`
- **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Redis:** `src/config/redis_config.py â†’ get_redis_config()`
- **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Binance:** `src/config/binance_config.py â†’ get_binance_config()`

---

## ğŸ“ Ğ—ĞĞšĞ›Ğ®Ğ§Ğ•ĞĞ˜Ğ•

Ğ­Ñ‚Ğ° Ğ´ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ¸Ñ‚ **ĞŸĞĞ›ĞĞ£Ğ® ĞšĞĞ Ğ¢Ğ£** Ğ²ÑĞµÑ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ñ **ĞšĞĞ–Ğ”ĞĞ™ Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ•Ğ™** Ğ¸ **ĞšĞĞ–Ğ”Ğ«Ğœ ĞœĞ•Ğ¢ĞĞ”ĞĞœ**. 

**Ğ”Ğ»Ñ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ:**
- **Ctrl+F** Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾ Ñ‚ĞµĞºÑÑ‚Ñƒ
- **ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²** Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ° Ğº Ğ½ÑƒĞ¶Ğ½Ğ¾Ğ¼Ñƒ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ
- **ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹** Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¹ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸
- **Ğ Ğ°Ğ·Ğ´ĞµĞ»Ñ‹ Ğ¿Ğ¾ ÑĞ»Ğ¾ÑĞ¼** Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹

**ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ» Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ñ:**
- âœ… ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸ĞµĞ¼ Ğ¸ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸ĞµĞ¼
- âœ… Ğ’ÑĞµĞ¼Ğ¸ ĞºĞ»Ğ°ÑÑĞ°Ğ¼Ğ¸ Ğ¸ Ğ¸Ñ… Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ°Ğ¼Ğ¸  
- âœ… Ğ’ÑĞµĞ¼Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑĞ¼Ğ¸ Ñ Ğ¸Ñ… Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ğ¼Ğ¸
- âœ… Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼Ğ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¸ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ğ°Ğ¼Ğ¸
- âœ… Ğ¡Ğ²ÑĞ·ÑĞ¼Ğ¸ Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼Ğ¸ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑĞ¼Ğ¸

**Ğ­Ñ‚Ğ¾Ğ³Ğ¾ Ñ€ÑƒĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ° Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ´Ğ»Ñ:**
- ğŸ¯ Ğ˜Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ Ğ½Ğ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ñƒ
- ğŸ”§ ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ Ğ»ÑĞ±Ğ¾Ğ¹ Ñ‡Ğ°ÑÑ‚Ğ¸ ĞºĞ¾Ğ´Ğ¾Ğ²Ğ¾Ğ¹ Ğ±Ğ°Ğ·Ñ‹
- ğŸ“ ĞœĞ¾Ğ´Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¸ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»Ğ°
- â• Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹
- ğŸ› ĞÑ‚Ğ»Ğ°Ğ´ĞºĞ¸ Ğ¸ Ğ¸ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

---

*Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ°: 2025-07-30*  
*Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ Ğ´Ğ»Ñ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ ĞºĞ¾Ğ´ĞµĞºÑĞ°*
    """Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ"""
```

---

### ğŸ“‚ `src/services/indicators/`

#### ğŸ“„ `src/services/indicators/rsi_calculator.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ RSI Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°

**ĞšĞ»Ğ°ÑÑ:**
```python
class RSICalculator:
    """ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ RSI (Relative Strength Index)"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€Ğ° RSI"""

async def calculate_rsi(self, prices: List[float], period: int = 14) -> Optional[float]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ RSI Ğ´Ğ»Ñ Ğ¼Ğ°ÑÑĞ¸Ğ²Ğ° Ñ†ĞµĞ½"""

async def calculate_real_time_rsi(self, symbol: str, timeframe: str, period: int = 14) -> Optional[float]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ RSI Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ¸Ğ· ĞºĞµÑˆĞ°"""

def _calculate_rsi_basic(self, prices: List[float], period: int) -> Optional[float]
    """Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° RSI"""

def _calculate_gains_losses(self, prices: List[float]) -> Tuple[List[float], List[float]]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ±Ñ‹Ğ»Ğ¸ Ğ¸ ÑƒĞ±Ñ‹Ñ‚ĞºĞ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ Ñ†ĞµĞ½Ğ°Ğ¼Ğ¸"""

def _smooth_values(self, values: List[float], period: int) -> List[float]
    """Ğ¡Ğ³Ğ»Ğ°Ğ´Ğ¸Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑ EMA"""

def _calculate_rs(self, avg_gain: float, avg_loss: float) -> float
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Relative Strength (RS)"""

def _calculate_rsi_from_rs(self, rs: float) -> float
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ RSI Ğ¸Ğ· RS"""

async def calculate_rsi_for_multiple_periods(self, prices: List[float], periods: List[int]) -> Dict[int, float]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ RSI Ğ´Ğ»Ñ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ¾Ğ²"""

def validate_rsi_inputs(self, prices: List[float], period: int) -> bool
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ RSI"""

def get_rsi_signal_strength(self, rsi_value: float) -> str
    """ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ ÑĞ¸Ğ»Ñƒ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ° RSI"""
```

#### ğŸ“„ `src/services/indicators/ema_calculator.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ EMA Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ°

**ĞšĞ»Ğ°ÑÑ:**
```python
class EMACalculator:
    """ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ EMA (Exponential Moving Average)"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€Ğ° EMA"""

async def calculate_ema(self, prices: List[float], period: int) -> Optional[float]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ EMA Ğ´Ğ»Ñ Ğ¼Ğ°ÑÑĞ¸Ğ²Ğ° Ñ†ĞµĞ½"""

async def calculate_multiple_ema(self, prices: List[float], periods: List[int]) -> Dict[int, float]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ EMA Ğ´Ğ»Ñ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´Ğ¾Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾"""

def _calculate_ema_basic(self, prices: List[float], period: int) -> Optional[float]
    """Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ°Ğ»Ğ³Ğ¾Ñ€Ğ¸Ñ‚Ğ¼ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° EMA"""

def _calculate_smoothing_factor(self, period: int) -> float
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ĞºĞ¾ÑÑ„Ñ„Ğ¸Ñ†Ğ¸ĞµĞ½Ñ‚ ÑĞ³Ğ»Ğ°Ğ¶Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ (Ğ°Ğ»ÑŒÑ„Ğ°)"""

def _calculate_initial_sma(self, prices: List[float], period: int) -> float
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ SMA Ğ´Ğ»Ñ EMA"""

async def calculate_ema_real_time(self, symbol: str, timeframe: str, period: int) -> Optional[float]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ EMA Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸"""

def detect_ema_crossover(self, ema_short: float, ema_long: float, prev_ema_short: float, prev_ema_long: float) -> Optional[str]
    """ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑ€ĞµÑĞµÑ‡ĞµĞ½Ğ¸Ğµ EMA (bullish/bearish)"""

def calculate_ema_slope(self, current_ema: float, previous_ema: float) -> float
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ½Ğ°ĞºĞ»Ğ¾Ğ½ EMA"""

def validate_ema_inputs(self, prices: List[float], period: int) -> bool
    """Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ EMA"""
```

---

### ğŸ“‚ `src/services/signals/`

#### ğŸ“„ `src/services/signals/rsi_signals.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ RSI ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²

**ĞšĞ»Ğ°ÑÑ:**
```python
class RSISignalGenerator:
    """Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ RSI ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ° RSI ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""

async def process_rsi_update(self, session: AsyncSession, symbol: str, timeframe: str, rsi_value: float, price: float, volume_change_percent: Optional[float] = None) -> int
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ RSI Ğ¸ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹"""

async def check_rsi_signals(self, session: AsyncSession, symbol: str, timeframe: str, current_rsi: float, current_price: float, volume_change_percent: Optional[float] = None) -> List[Dict[str, Any]]
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ RSI ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""

async def generate_notifications(self, signals: List[Dict[str, Any]]) -> int
    """Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ´Ğ»Ñ RSI ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""

def _determine_rsi_signal_type(self, rsi_value: float) -> Optional[str]
    """ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ñ‚Ğ¸Ğ¿ RSI ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ° Ğ¿Ğ¾ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ"""

async def _get_users_for_notification(self, session: AsyncSession, symbol: str, timeframe: str) -> List[int]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ Ğ´Ğ»Ñ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ"""

async def _can_send_signal(self, session: AsyncSession, user_id: int, symbol: str, timeframe: str, signal_type: str) -> bool
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ»Ğ¸ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¸Ğ³Ğ½Ğ°Ğ» (Ğ°Ğ½Ñ‚Ğ¸ÑĞ¿Ğ°Ğ¼)"""

async def _save_signal_history(self, session: AsyncSession, signals: List[Dict[str, Any]]) -> None
    """Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ² Ğ² Ğ‘Ğ”"""

def _get_signal_interval(self, signal_type: str) -> int
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ» Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°Ğ¼Ğ¸ Ğ´Ğ»Ñ Ñ‚Ğ¸Ğ¿Ğ°"""

def _format_signal_message(self, signal_data: Dict[str, Any]) -> str
    """Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°"""

async def get_signal_statistics(self) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""
```

**Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€:** `rsi_signal_generator = RSISignalGenerator()`

#### ğŸ“„ `src/services/signals/signal_aggregator.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞĞ³Ñ€ĞµĞ³Ğ°Ñ‚Ğ¾Ñ€ Ğ²ÑĞµÑ… Ñ‚Ğ¸Ğ¿Ğ¾Ğ² ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²

**ĞšĞ»Ğ°ÑÑ:**
```python
class SignalAggregator:
    """ĞĞ³Ñ€ĞµĞ³Ğ°Ñ‚Ğ¾Ñ€ Ğ²ÑĞµÑ… Ñ‚Ğ¸Ğ¿Ğ¾Ğ² ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ‚Ğ¾Ñ€Ğ° ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ¾Ğ²"""

async def process_candle_update(self, session: AsyncSession, symbol: str, timeframe: str, candle_data: Dict[str, Any], is_closed: bool = True) -> Dict[str, int]
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ²ĞµÑ‡Ğ¸ Ğ¸ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹"""

async def _calculate_indicators(self, symbol: str, timeframe: str, candle_data: Dict[str, Any], is_closed: bool) -> Dict[str, Any]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ²ÑĞµ Ğ¸Ğ½Ğ´Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹ Ğ´Ğ»Ñ ÑĞ²ĞµÑ‡Ğ¸"""

async def _calculate_volume_change(self, symbol: str, timeframe: str, candle_data: Dict[str, Any]) -> Optional[float]
    """Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¾Ğ±ÑŠĞµĞ¼Ğ°"""

async def _process_rsi_signals(self, session: AsyncSession, symbol: str, timeframe: str, rsi_value: float, price: float, volume_change_percent: Optional[float]) -> int
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ RSI ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹"""

async def _process_ema_signals(self, session: AsyncSession, symbol: str, timeframe: str, ema_values: Dict[int, float], price: float) -> int
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ EMA ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ñ‹"""

def get_processing_stats(self) -> Dict[str, Any]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸"""

def reset_stats(self) -> None
    """Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ"""
```

**Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€:** `signal_aggregator = SignalAggregator()`

---

### ğŸ“‚ `src/services/notifications/`

#### ğŸ“„ `src/services/notifications/telegram_sender.py`
**ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ:** ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ Ğ² Telegram

**ĞšĞ»Ğ°ÑÑ:**
```python
class TelegramSender:
    """Ğ¡ĞµÑ€Ğ²Ğ¸Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ² Telegram"""
```

**ĞœĞµÑ‚Ğ¾Ğ´Ñ‹:**
```python
def __init__(self, bot: Bot)
    """Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ ÑĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€Ğ¾Ğ¼ Ğ±Ğ¾Ñ‚Ğ°"""

async def send_signal_notification(self, user_id: int, signal_data: Dict[str, Any]) -> bool
    """ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ Ğ¾ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğµ"""

async def send_message_to_user(self, user_id: int, text: str, reply_markup: Optional[InlineKeyboardMarkup] = None) -> bool
    """ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

async def send_message_with_retry(self, user_id: int, text: str, reply_markup: Optional[InlineKeyboardMarkup] = None, max_retries: int = 3) -> bool
    """ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ñ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ°Ğ¼Ğ¸"""

async def handle_blocked_user(self, user_id: int) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ·Ğ°Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

async def handle_user_deactivated(self, user_id: int) -> None
    """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ´ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ"""

async def send_bulk_notifications(self, notifications: List[Tuple[int, str, Optional[InlineKeyboardMarkup]]]) -> Dict[str, int]
    """ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¼Ğ°ÑÑĞ¾Ğ²Ñ‹Ğµ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ"""

def _create_signal_keyboard(self) -> InlineKeyboardMarkup
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ Ğ´Ğ»Ñ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°"""

async def _log_delivery_status(self, user_id: int, success: bool, error: Optional[str] = None) -> None
    """Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸"""

def get_delivery_stats(self) -> Dict[str, int]
    """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸"""

def reset_stats(self) -> None